<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/ficon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.png">
  <link rel="mask-icon" href="/images/icon.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"bqlin.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-2}},"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":-1,"unescape":false,"preload":false},"motion":{"enable":false,"async":true,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="ÊØèÂΩì‰Ω†‰∏éÂ∫ïÂ±ÇÁ≥ªÁªüÊâì‰∫§ÈÅìÊó∂ÔºåÂøÖÈ°ªÂáÜÂ§áÂ•ΩËØ•‰ªªÂä°ÂèØËÉΩÈúÄË¶ÅËä±Ë¥πÂ§ßÈáèÁöÑÊó∂Èó¥„ÄÇÂØπÂÜÖÊ†∏ÊàñÂÖ∂‰ªñÁ≥ªÁªüÂ±ÇÁöÑË∞ÉÁî®Ê∂âÂèäÂà∞‰∏ä‰∏ãÊñáÁöÑÊîπÂèòÔºå‰∏éÂèëÁîüÂú®ËøõÁ®ã‰∏≠ÁöÑË∞ÉÁî®Áõ∏ÊØîÔºåËøôÁßçÊîπÂèòÊòØÁõ∏ÂΩìÊòÇË¥µÁöÑ„ÄÇÂõ†Ê≠§ÔºåËÆ∏Â§öÁ≥ªÁªüÂ∫ìÊèê‰æõ‰∫ÜÂºÇÊ≠•Êé•Âè£ÔºåÂÖÅËÆ∏‰Ω†ÁöÑ‰ª£Á†ÅÂêëÁ≥ªÁªüÊèê‰∫§‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂπ∂Âú®Â§ÑÁêÜËØ•ËØ∑Ê±ÇÊó∂ÁªßÁª≠ÂÅöÂÖ∂‰ªñÂ∑•‰Ωú„ÄÇGrand Central DispatchÂª∫Á´ãÂú®ËøôÁßç‰∏ÄËà¨Ë°å‰∏∫ÁöÑÂü∫Á°Ä‰∏äÔºåÂÖÅËÆ∏‰Ω†Êèê‰∫§ËØ∑Ê±ÇÔºåÂπ∂‰ΩøÁî®blockÂíåË∞ÉÂ∫¶ÈòüÂàóÂ∞ÜÁªìÊûúÂèçÈ¶àÁªô‰Ω†ÁöÑ‰ª£Á†Å„ÄÇ">
<meta property="og:type" content="article">
<meta property="og:title" content="Concurrency Programming GuideÔºöË∞ÉÂ∫¶Ê∫ê">
<meta property="og:url" content="https://bqlin.github.io/posts/concurrency_pg_dispatch_sources/index.html">
<meta property="og:site_name" content="Ê¨äÂíöÈ¢ÜÂüü">
<meta property="og:description" content="ÊØèÂΩì‰Ω†‰∏éÂ∫ïÂ±ÇÁ≥ªÁªüÊâì‰∫§ÈÅìÊó∂ÔºåÂøÖÈ°ªÂáÜÂ§áÂ•ΩËØ•‰ªªÂä°ÂèØËÉΩÈúÄË¶ÅËä±Ë¥πÂ§ßÈáèÁöÑÊó∂Èó¥„ÄÇÂØπÂÜÖÊ†∏ÊàñÂÖ∂‰ªñÁ≥ªÁªüÂ±ÇÁöÑË∞ÉÁî®Ê∂âÂèäÂà∞‰∏ä‰∏ãÊñáÁöÑÊîπÂèòÔºå‰∏éÂèëÁîüÂú®ËøõÁ®ã‰∏≠ÁöÑË∞ÉÁî®Áõ∏ÊØîÔºåËøôÁßçÊîπÂèòÊòØÁõ∏ÂΩìÊòÇË¥µÁöÑ„ÄÇÂõ†Ê≠§ÔºåËÆ∏Â§öÁ≥ªÁªüÂ∫ìÊèê‰æõ‰∫ÜÂºÇÊ≠•Êé•Âè£ÔºåÂÖÅËÆ∏‰Ω†ÁöÑ‰ª£Á†ÅÂêëÁ≥ªÁªüÊèê‰∫§‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂπ∂Âú®Â§ÑÁêÜËØ•ËØ∑Ê±ÇÊó∂ÁªßÁª≠ÂÅöÂÖ∂‰ªñÂ∑•‰Ωú„ÄÇGrand Central DispatchÂª∫Á´ãÂú®ËøôÁßç‰∏ÄËà¨Ë°å‰∏∫ÁöÑÂü∫Á°Ä‰∏äÔºåÂÖÅËÆ∏‰Ω†Êèê‰∫§ËØ∑Ê±ÇÔºåÂπ∂‰ΩøÁî®blockÂíåË∞ÉÂ∫¶ÈòüÂàóÂ∞ÜÁªìÊûúÂèçÈ¶àÁªô‰Ω†ÁöÑ‰ª£Á†Å„ÄÇ">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-09-08T09:43:58.000Z">
<meta property="article:modified_time" content="2021-10-24T04:12:53.000Z">
<meta property="article:author" content="Ê¨äÂíö">
<meta property="article:tag" content="Apple">
<meta property="article:tag" content="Â§öÁ∫øÁ®ã">
<meta property="article:tag" content="Concurrency Programming Guide">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://bqlin.github.io/posts/concurrency_pg_dispatch_sources/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Concurrency Programming GuideÔºöË∞ÉÂ∫¶Ê∫ê | Ê¨äÂíöÈ¢ÜÂüü</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-105338942-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-105338942-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?98fcf61fd269408d07dcbc1e49311f9a";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Ê¨äÂíöÈ¢ÜÂüü" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="ÂàáÊç¢ÂØºËà™Ê†è">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ê¨äÂíöÈ¢ÜÂüü</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Making app a work of art.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>È¶ñÈ°µ</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>ÂΩíÊ°£</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Ê†áÁ≠æ</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>ÂàÜÁ±ª</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>ÂÖ≥‰∫é</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>ÊêúÁ¥¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="ÊêúÁ¥¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://bqlin.github.io/posts/concurrency_pg_dispatch_sources/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon.png">
      <meta itemprop="name" content="Ê¨äÂíö">
      <meta itemprop="description" content="ü§òü§Øüëæ">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ê¨äÂíöÈ¢ÜÂüü">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Concurrency Programming GuideÔºöË∞ÉÂ∫¶Ê∫ê
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">ÂèëË°®‰∫é</span>

              <time title="ÂàõÂª∫Êó∂Èó¥Ôºö2021-09-08 17:43:58" itemprop="dateCreated datePublished" datetime="2021-09-08T17:43:58+08:00">2021-09-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Êõ¥Êñ∞‰∫é</span>
                <time title="‰øÆÊîπÊó∂Èó¥Ôºö2021-10-24 12:12:53" itemprop="dateModified" datetime="2021-10-24T12:12:53+08:00">2021-10-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">ÂàÜÁ±ª‰∫é</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%BF%BB%E8%AF%91/" itemprop="url" rel="index"><span itemprop="name">ÁøªËØë</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="ÈòÖËØªÊ¨°Êï∞" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">ÈòÖËØªÊ¨°Êï∞Ôºö</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="Êú¨ÊñáÂ≠óÊï∞">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Êú¨ÊñáÂ≠óÊï∞Ôºö</span>
              <span>15k</span>
            </span>
            <span class="post-meta-item" title="ÈòÖËØªÊó∂Èïø">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">ÈòÖËØªÊó∂Èïø &asymp;</span>
              <span>14 ÂàÜÈíü</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>ÊØèÂΩì‰Ω†‰∏éÂ∫ïÂ±ÇÁ≥ªÁªüÊâì‰∫§ÈÅìÊó∂ÔºåÂøÖÈ°ªÂáÜÂ§áÂ•ΩËØ•‰ªªÂä°ÂèØËÉΩÈúÄË¶ÅËä±Ë¥πÂ§ßÈáèÁöÑÊó∂Èó¥„ÄÇÂØπÂÜÖÊ†∏ÊàñÂÖ∂‰ªñÁ≥ªÁªüÂ±ÇÁöÑË∞ÉÁî®Ê∂âÂèäÂà∞‰∏ä‰∏ãÊñáÁöÑÊîπÂèòÔºå‰∏éÂèëÁîüÂú®ËøõÁ®ã‰∏≠ÁöÑË∞ÉÁî®Áõ∏ÊØîÔºåËøôÁßçÊîπÂèòÊòØÁõ∏ÂΩìÊòÇË¥µÁöÑ„ÄÇÂõ†Ê≠§ÔºåËÆ∏Â§öÁ≥ªÁªüÂ∫ìÊèê‰æõ‰∫ÜÂºÇÊ≠•Êé•Âè£ÔºåÂÖÅËÆ∏‰Ω†ÁöÑ‰ª£Á†ÅÂêëÁ≥ªÁªüÊèê‰∫§‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÂπ∂Âú®Â§ÑÁêÜËØ•ËØ∑Ê±ÇÊó∂ÁªßÁª≠ÂÅöÂÖ∂‰ªñÂ∑•‰Ωú„ÄÇGrand Central DispatchÂª∫Á´ãÂú®ËøôÁßç‰∏ÄËà¨Ë°å‰∏∫ÁöÑÂü∫Á°Ä‰∏äÔºåÂÖÅËÆ∏‰Ω†Êèê‰∫§ËØ∑Ê±ÇÔºåÂπ∂‰ΩøÁî®blockÂíåË∞ÉÂ∫¶ÈòüÂàóÂ∞ÜÁªìÊûúÂèçÈ¶àÁªô‰Ω†ÁöÑ‰ª£Á†Å„ÄÇ</p>
<span id="more"></span>
<h2 id="ÂÖ≥‰∫éË∞ÉÂ∫¶Ê∫ê">ÂÖ≥‰∫éË∞ÉÂ∫¶Ê∫ê</h2>
<p><em>Ë∞ÉÂ∫¶Ê∫ê</em>ÊòØ‰∏Ä‰∏™Âü∫Êú¨ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂÆÉÂçèË∞ÉÁâπÂÆöÁöÑÂ∫ïÂ±ÇÁ≥ªÁªü‰∫ã‰ª∂ÁöÑÂ§ÑÁêÜ„ÄÇGrand Central DispatchÊîØÊåÅ‰ª•‰∏ãÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫êÔºö</p>
<ul>
<li><em>ËÆ°Êó∂Âô®Ë∞ÉÂ∫¶Ê∫ê</em>‰∫ßÁîüÂÆöÊúüÈÄöÁü•„ÄÇ</li>
<li><em>‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫ê</em>Âú®UNIX‰ø°Âè∑Âà∞ËææÊó∂ÂèëÂá∫ÈÄöÁü•„ÄÇ</li>
<li><em>ÊèèËø∞Á¨¶Ê∫ê</em>ÈÄöÁü•‰Ω†ÂêÑÁßçÂü∫‰∫éÊñá‰ª∂ÂíåÂ•óÊé•Â≠óÁöÑÊìç‰ΩúÔºå‰æãÂ¶ÇÔºö
<ul>
<li>ÂΩìÊï∞ÊçÆÂèØ‰æõËØªÂèñÊó∂Ôºõ</li>
<li>ÂΩìÂèØ‰ª•ÂÜôÂÖ•Êï∞ÊçÆÊó∂Ôºõ</li>
<li>ÂΩìÊñá‰ª∂Âú®Êñá‰ª∂Á≥ªÁªü‰∏≠Ë¢´Âà†Èô§„ÄÅÁßªÂä®ÊàñÈáçÂëΩÂêçÊó∂Ôºõ</li>
<li>ÂΩìÊñá‰ª∂ÂÖÉ‰ø°ÊÅØÂèëÁîüÂèòÂåñÊó∂Ôºõ</li>
</ul></li>
<li><em>ËøõÁ®ãË∞ÉÂ∫¶Ê∫ê</em>ÈÄöÁü•‰Ω†‰∏éËøõÁ®ãÊúâÂÖ≥ÁöÑ‰∫ã‰ª∂ÔºåÂ¶ÇÔºö
<ul>
<li>ÂΩì‰∏Ä‰∏™ËøõÁ®ãÈÄÄÂá∫Êó∂Ôºõ</li>
<li>ÂΩì‰∏Ä‰∏™ËøõÁ®ãÂèëÂá∫‰∏Ä‰∏™<code>fork</code>Êàñ<code>exec</code>Á±ªÂûãÁöÑË∞ÉÁî®Êó∂Ôºõ</li>
<li>ÂΩì‰∏Ä‰∏™‰ø°Âè∑Ë¢´‰º†ÈÄíÁªôËøõÁ®ãÊó∂Ôºõ</li>
</ul></li>
<li><em>Êú∫Âô®Á´ØÂè£Ë∞ÉÂ∫¶Ê∫ê</em>ÈÄöÁü•‰∏éÊú∫Âô®ÊúâÂÖ≥ÁöÑ‰∫ã‰ª∂„ÄÇ</li>
<li><em>Ëá™ÂÆö‰πâË∞ÉÂ∫¶Ê∫ê</em>ÂèØ‰ª•Áî±Ëá™Â∑±ÂÆö‰πâÂíåËß¶Âèë„ÄÇ</li>
</ul>
<p>Ë∞ÉÂ∫¶Ê∫êÂèñ‰ª£ÈÄöÂ∏∏Áî®‰∫éÂ§ÑÁêÜÁ≥ªÁªüÁõ∏ÂÖ≥‰∫ã‰ª∂ÁöÑÂºÇÊ≠•ÂõûË∞ÉÂáΩÊï∞„ÄÇÂΩì‰Ω†ÈÖçÁΩÆ‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÊó∂ÔºåÊåáÂÆö‰Ω†ÊÉ≥ÁõëÊéßÁöÑ‰∫ã‰ª∂ÂíåË∞ÉÂ∫¶ÈòüÂàóÔºå‰ª•ÂèäÁî®Êù•Â§ÑÁêÜËøô‰∫õ‰∫ã‰ª∂ÁöÑ‰ª£Á†Å„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®blockÂØπË±°ÊàñÂáΩÊï∞ÊåáÂÆö‰Ω†ÁöÑ‰ª£Á†Å„ÄÇÂΩì‰∏Ä‰∏™ÊÑüÂÖ¥Ë∂£ÁöÑ‰∫ã‰ª∂Âà∞Êù•Êó∂ÔºåË∞ÉÂ∫¶Ê∫ê‰ºöÂ∞Ü‰Ω†ÁöÑblockÊàñÂáΩÊï∞Êèê‰∫§ÁªôÊåáÂÆöÁöÑË∞ÉÂ∫¶ÈòüÂàóÊù•ÊâßË°å„ÄÇ</p>
<p>‰∏éÊâãÂä®Êèê‰∫§Âà∞ÈòüÂàóÁöÑ‰ªªÂä°‰∏çÂêåÔºåË∞ÉÂ∫¶Ê∫ê‰∏∫Á®ãÂ∫èÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÊåÅÁª≠ÁöÑ‰∫ã‰ª∂Ê∫ê„ÄÇÂú®‰Ω†ÊòéÁ°ÆÂèñÊ∂àÂÆÉ‰πãÂâçÔºå‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫ê‰∏ÄÁõ¥ËøûÊé•Âà∞ÂÆÉÁöÑË∞ÉÂ∫¶ÈòüÂàó„ÄÇÂú®ËøûÊé•ÊúüÈó¥ÔºåÊØèÂΩìÁõ∏Â∫îÁöÑ‰∫ã‰ª∂ÂèëÁîüÊó∂ÔºåÂÆÉÈÉΩ‰ºöÂêëË∞ÉÂ∫¶ÈòüÂàóÊèê‰∫§ÂÖ∂Áõ∏ÂÖ≥ÁöÑ‰ªªÂä°‰ª£Á†Å„ÄÇÊúâ‰∫õ‰∫ã‰ª∂ÔºåÂ¶ÇÂÆöÊó∂Âô®‰∫ã‰ª∂Ôºå‰ºöÂÆöÊúüÂèëÁîüÔºå‰ΩÜÂ§ßÂ§öÊï∞‰∫ã‰ª∂Âè™ÊòØÂú®ÁâπÂÆöÊù°‰ª∂Âá∫Áé∞Êó∂Èõ∂ÊòüÂú∞ÂèëÁîü„ÄÇÂá∫‰∫éËøô‰∏™ÂéüÂõ†ÔºåË∞ÉÂ∫¶Ê∫ê‰øùÁïôÂÖ∂Áõ∏ÂÖ≥ÁöÑË∞ÉÂ∫¶ÈòüÂàóÔºå‰ª•Èò≤Ê≠¢ÂÆÉÂú®‰∫ã‰ª∂ÂèØËÉΩ‰ªçÂú®Á≠âÂæÖÊó∂Ë¢´ËøáÊó©ÈáäÊîæ„ÄÇ</p>
<p>‰∏∫‰∫ÜÈò≤Ê≠¢‰∫ã‰ª∂ÁßØÂéãÂú®Ë∞ÉÂ∫¶ÈòüÂàó‰∏≠ÔºåË∞ÉÂ∫¶Ê∫êÂÆûÊñΩ‰∫Ü‰∏Ä‰∏™‰∫ã‰ª∂ÂêàÂπ∂ÔºàcoalescingÔºâÊñπÊ°à„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Êñ∞ÁöÑ‰∫ã‰ª∂Âú®Ââç‰∏Ä‰∏™‰∫ã‰ª∂ÁöÑhandlerË¢´ÂèñÊ∂àÊéíÈòüÂπ∂ÊâßË°å‰πãÂâçÂà∞ËææÔºåË∞ÉÂ∫¶Ê∫êÂ∞±‰ºöÂ∞ÜÊñ∞ÁöÑ‰∫ã‰ª∂Êï∞ÊçÆ‰∏éÊóß‰∫ã‰ª∂ÁöÑÊï∞ÊçÆÂêàÂπ∂Ëµ∑Êù•„ÄÇÊ†πÊçÆ‰∫ã‰ª∂ÁöÑÁ±ªÂûãÔºåÂêàÂπ∂ÂèØËÉΩ‰ºöÂèñ‰ª£Êóß‰∫ã‰ª∂ÊàñÊõ¥Êñ∞ÂÖ∂ÊåÅÊúâÁöÑ‰ø°ÊÅØ„ÄÇ‰æãÂ¶ÇÔºå‰∏Ä‰∏™Âü∫‰∫é‰ø°Âè∑ÁöÑË∞ÉÂ∫¶Ê∫êÂè™Êèê‰æõÂÖ≥‰∫éÊúÄËøëÁöÑ‰ø°Âè∑‰ø°ÊÅØÔºå‰ΩÜ‰πüÊä•ÂëäËá™‰∏äÊ¨°Ë∞ÉÁî®‰∫ã‰ª∂handler‰ª•Êù•ÔºåÊÄªÂÖ±ÊúâÂ§öÂ∞ë‰ø°Âè∑Ë¢´‰º†ÈÄí„ÄÇ</p>
<h2 id="ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫ê">ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫ê</h2>
<p>ÂàõÂª∫‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÂåÖÊã¨ÂàõÂª∫‰∫ã‰ª∂Ê∫êÂíåË∞ÉÂ∫¶Ê∫êÊú¨Ë∫´„ÄÇ‰∫ã‰ª∂Ê∫êÊòØÂ§ÑÁêÜËøô‰∫õ‰∫ã‰ª∂ÊâÄÈúÄÁöÑ‰ªª‰ΩïÊú¨Âú∞Êï∞ÊçÆÁªìÊûÑ„ÄÇ‰æãÂ¶ÇÔºåÂØπ‰∫é‰∏Ä‰∏™Âü∫‰∫éÊèèËø∞Á¨¶ÁöÑË∞ÉÂ∫¶Ê∫êÔºå‰Ω†ÈúÄË¶ÅÊâìÂºÄÊèèËø∞Á¨¶ÔºåËÄåÂØπ‰∫é‰∏Ä‰∏™Âü∫‰∫éËøõÁ®ãÁöÑÊ∫êÔºå‰Ω†ÈúÄË¶ÅËé∑ÂæóÁõÆÊ†áÁ®ãÂ∫èÁöÑËøõÁ®ãID„ÄÇÂΩì‰Ω†Êúâ‰∫Ü‰Ω†ÁöÑ‰∫ã‰ª∂Ê∫êÔºå‰Ω†Â∞±ÂèØ‰ª•Êåâ‰ª•‰∏ãÊñπÊ≥ïÂàõÂª∫Áõ∏Â∫îÁöÑË∞ÉÂ∫¶Ê∫êÔºö</p>
<ol type="1">
<li>‰ΩøÁî® <code>dispatch_source_create</code> ÂáΩÊï∞ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫ê„ÄÇ</li>
<li>ÈÖçÁΩÆË∞ÉÂ∫¶Ê∫êÔºö
<ul>
<li>‰∏∫Ë∞ÉÂ∫¶Ê∫êÂàÜÈÖç‰∏Ä‰∏™‰∫ã‰ª∂handlerÔºõÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW13">Writing and Installing an Event Handler</a>„ÄÇ</li>
<li>ÂØπ‰∫éÂÆöÊó∂Âô®Ê∫êÔºå‰ΩøÁî®<code>dispatch_source_set_timer</code>ÂáΩÊï∞ËÆæÁΩÆÂÆöÊó∂Âô®‰ø°ÊÅØÔºõÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW2">Creating a Timer</a>„ÄÇ</li>
</ul></li>
<li>ÂèØ‰ª•ÈÄâÊã©ÁªôË∞ÉÂ∫¶Ê∫êÂàÜÈÖç‰∏Ä‰∏™ÂèñÊ∂àhandlerÔºõÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW14">Installing a Cancellation Handler</a>„ÄÇ</li>
<li>Ë∞ÉÁî®<code>dispatch_resume</code>ÂáΩÊï∞ÂºÄÂßãÂ§ÑÁêÜ‰∫ã‰ª∂ÔºõÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW8">Suspending and Resuming Dispatch Sources</a>„ÄÇ</li>
</ol>
<p>Áî±‰∫éË∞ÉÂ∫¶Ê∫êÂú®‰ΩøÁî®ÂâçÈúÄË¶Å‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÈÖçÁΩÆÔºå<code>dispatch_source_create</code>ÂáΩÊï∞Âú®ÊöÇÂÅúÁä∂ÊÄÅ‰∏ãËøîÂõûË∞ÉÂ∫¶Ê∫ê„ÄÇÂú®ÊöÇÂÅúÁä∂ÊÄÅ‰∏ãÔºåË∞ÉÂ∫¶Ê∫êÊé•Êî∂‰∫ã‰ª∂‰ΩÜ‰∏çÂ§ÑÁêÜÂÆÉ‰ª¨„ÄÇËøô‰Ωø‰Ω†ÊúâÊó∂Èó¥ÈÖçÁΩÆ‰∏Ä‰∏™‰∫ã‰ª∂handlerÔºåÂπ∂ÊâßË°åÂ§ÑÁêÜÂÆûÈôÖ‰∫ã‰ª∂ÊâÄÈúÄÁöÑÂÖ∂‰ªñÈÖçÁΩÆ„ÄÇ</p>
<p>‰∏ãÈù¢ÁöÑÁ´†ËäÇÂêë‰Ω†Â±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÈÖçÁΩÆË∞ÉÂ∫¶Ê∫ê„ÄÇÂÖ≥‰∫éÂ±ïÁ§∫Â¶Ç‰ΩïÈÖçÁΩÆÁâπÂÆöÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫êÁöÑËØ¶ÁªÜ‰æãÂ≠êÔºåÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW22">Dispatch Source Examples</a>„ÄÇÂÖ≥‰∫éÁî®Êù•ÂàõÂª∫ÂíåÈÖçÁΩÆË∞ÉÂ∫¶Ê∫êÁöÑÂáΩÊï∞ÁöÑÂÖ∂‰ªñ‰ø°ÊÅØÔºåÂèØÂèÇÈòÖ<em>Grand Central Dispatch (GCD) Reference</em>„ÄÇ</p>
<h3 id="ÁºñÂÜôÂíåÈÖçÁΩÆ‰∏Ä‰∏™‰∫ã‰ª∂handler">ÁºñÂÜôÂíåÈÖçÁΩÆ‰∏Ä‰∏™‰∫ã‰ª∂Handler</h3>
<p>‰∏∫‰∫ÜÂ§ÑÁêÜÁî±Ë∞ÉÂ∫¶Ê∫ê‰∫ßÁîüÁöÑ‰∫ã‰ª∂Ôºå‰Ω†ÂøÖÈ°ªÂÆö‰πâ‰∏Ä‰∏™‰∫ã‰ª∂handlerÊù•Â§ÑÁêÜËøô‰∫õ‰∫ã‰ª∂„ÄÇ‰∫ã‰ª∂handlerÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÊàñblockÂØπË±°ÔºåÁî®<code>dispatch_source_set_event_handler</code>Êàñ<code>dispatch_source_set_event_handler_f</code>ÂáΩÊï∞Â∞ÜÂÖ∂ÈÖçÁΩÆÂú®Ë∞ÉÂ∫¶Ê∫ê‰∏ä„ÄÇÂΩì‰∏Ä‰∏™‰∫ã‰ª∂Âà∞Êù•Êó∂ÔºåË∞ÉÂ∫¶Ê∫ê‰ºöÂ∞Ü‰∫ã‰ª∂handlerÊèê‰∫§ÁªôÊåáÂÆöÁöÑË∞ÉÂ∫¶ÈòüÂàóËøõË°åÂ§ÑÁêÜ„ÄÇ</p>
<p>‰Ω†ÁöÑ‰∫ã‰ª∂handlerÁöÑ‰∏ª‰ΩìË¥üË¥£Â§ÑÁêÜ‰ªª‰ΩïÂà∞ËææÁöÑ‰∫ã‰ª∂„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑ‰∫ã‰ª∂handlerÂ∑≤ÁªèÂú®ÈòüÂàó‰∏≠Âπ∂Á≠âÂæÖÂ§ÑÁêÜ‰∏Ä‰∏™‰∫ã‰ª∂ÔºåÂΩì‰∏Ä‰∏™Êñ∞ÁöÑ‰∫ã‰ª∂Âà∞ËææÊó∂ÔºåË∞ÉÂ∫¶Ê∫ê‰ºöÂ∞ÜËøô‰∏§‰∏™‰∫ã‰ª∂ÂêàÂπ∂Ëµ∑Êù•„ÄÇ‰∏Ä‰∏™‰∫ã‰ª∂handlerÈÄöÂ∏∏Âè™ÁúãÂà∞ÊúÄËøëÁöÑ‰∫ã‰ª∂ÁöÑ‰ø°ÊÅØÔºå‰ΩÜÊ†πÊçÆË∞ÉÂ∫¶Ê∫êÁöÑÁ±ªÂûãÔºåÂÆÉ‰πüÂèØ‰ª•Ëé∑ÂæóÂÖ∂‰ªñÂ∑≤ÁªèÂèëÁîüÂπ∂Ë¢´ÂêàÂπ∂ÁöÑ‰∫ã‰ª∂ÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñ∞ÁöÑ‰∫ã‰ª∂Âú®‰∫ã‰ª∂handlerÂºÄÂßãÊâßË°åÂêéÂà∞ËææÔºåË∞ÉÂ∫¶Ê∫ê‰ºö‰øùÁïôËøô‰∫õ‰∫ã‰ª∂ÔºåÁõ¥Âà∞ÂΩìÂâç‰∫ã‰ª∂handlerÊâßË°åÂÆåÊØï„ÄÇËøôÊó∂ÔºåÂÆÉÂ∞Ü‰∫ã‰ª∂handler‰∏éÊñ∞ÁöÑ‰∫ã‰ª∂‰∏ÄËµ∑ÂÜçÊ¨°Êèê‰∫§ÁªôÈòüÂàó„ÄÇ</p>
<p>Âü∫‰∫éÂáΩÊï∞ÁöÑ‰∫ã‰ª∂handlerÊé•Âèó‰∏Ä‰∏™Âçï‰∏ÄÁöÑ‰∏ä‰∏ãÊñáÊåáÈíàÔºåÂåÖÂê´Ë∞ÉÂ∫¶Ê∫êÂØπË±°ÔºåÂπ∂‰∏î‰∏çËøîÂõû‰ªª‰ΩïÂÄº„ÄÇÂü∫‰∫éblockÁöÑ‰∫ã‰ª∂handler‰∏çÊé•ÂèóÂèÇÊï∞Ôºå‰πüÊ≤°ÊúâËøîÂõûÂÄº„ÄÇ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Block-based event handler</span></span><br><span class="line"><span class="keyword">void</span> (^dispatch_block_t)(<span class="keyword">void</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Function-based event handler</span></span><br><span class="line"><span class="keyword">void</span> (*dispatch_function_t)(<span class="keyword">void</span> *)</span><br></pre></td></tr></table></figure>
<p>Âú®‰∫ã‰ª∂handler‰∏≠Ôºå‰Ω†ÂèØ‰ª•‰ªéË∞ÉÂ∫¶Ê∫êÊú¨Ë∫´Ëé∑ÂæóÂÖ≥‰∫éÁªôÂÆö‰∫ã‰ª∂ÁöÑ‰ø°ÊÅØ„ÄÇÂ∞ΩÁÆ°Âü∫‰∫éÂáΩÊï∞ÁöÑ‰∫ã‰ª∂handlerË¢´‰º†ÈÄí‰∏Ä‰∏™ÊåáÂêëË∞ÉÂ∫¶Ê∫êÁöÑÊåáÈíà‰Ωú‰∏∫ÂèÇÊï∞Ôºå‰ΩÜÂü∫‰∫éblockÁöÑ‰∫ã‰ª∂handlerÂøÖÈ°ªËá™Â∑±ÊçïËé∑Ëøô‰∏™ÊåáÈíà„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÊ≠£Â∏∏ÂºïÁî®ÂåÖÂê´Ë∞ÉÂ∫¶Ê∫êÁöÑÂèòÈáèÊù•ÂÆûÁé∞ÊçïËé∑ÊåáÈíà„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁâáÊÆµÊçïËé∑‰∫Ü<code>source</code>ÂèòÈáèÔºåÂÆÉË¢´Â£∞ÊòéÂú®blockÁöÑËåÉÂõ¥‰πãÂ§ñ„ÄÇ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_READ,</span><br><span class="line">                                 myDescriptor, <span class="number">0</span>, myQueue);</span><br><span class="line">dispatch_source_set_event_handler(source, ^&#123;</span><br><span class="line">   <span class="comment">// Get some data from the source variable, which is captured</span></span><br><span class="line">   <span class="comment">// from the parent context.</span></span><br><span class="line">   size_t estimated = dispatch_source_get_data(source);</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// Continue reading the descriptor...</span></span><br><span class="line">&#125;);</span><br><span class="line">dispatch_resume(source);</span><br></pre></td></tr></table></figure>
<p>Âú®blockÂÜÖÊçïËé∑ÂèòÈáèÈÄöÂ∏∏ÊòØ‰∏∫‰∫ÜËé∑ÂæóÊõ¥Â§ßÁöÑÁÅµÊ¥ªÊÄßÂíåÂä®ÊÄÅÊÄß„ÄÇÂΩìÁÑ∂ÔºåÊçïËé∑ÁöÑÂèòÈáèÂú®blockÂÜÖÈªòËÆ§‰∏∫Âè™ËØª„ÄÇÂ∞ΩÁÆ°blockÂäüËÉΩÊèê‰æõ‰∫ÜÂØπÁâπÂÆöÊÉÖÂÜµ‰∏ã‰øÆÊîπÊçïËé∑ÂèòÈáèÁöÑÊîØÊåÅÔºå‰ΩÜ‰Ω†‰∏çÂ∫îËØ•ËØïÂõæÂú®‰∏éË∞ÉÂ∫¶Ê∫êÁõ∏ÂÖ≥ÁöÑ‰∫ã‰ª∂handler‰∏≠ËøôÊ†∑ÂÅö„ÄÇË∞ÉÂ∫¶Ê∫êÊÄªÊòØÂºÇÊ≠•Âú∞ÊâßË°åÂÆÉ‰ª¨ÁöÑ‰∫ã‰ª∂handlerÔºåÊâÄ‰ª•ÂΩì‰Ω†ÁöÑ‰∫ã‰ª∂handlerÊâßË°åÊó∂Ôºå‰Ω†ÊçïËé∑ÁöÑ‰ªª‰ΩïÂèòÈáèÁöÑÂÆö‰πâ‰ΩúÁî®ÂüüÂæàÂèØËÉΩÂ∑≤ÁªèÊ∂àÂ§±„ÄÇÂÖ≥‰∫éÂ¶Ç‰ΩïÂú®blockÂÜÖÊçïËé∑Âíå‰ΩøÁî®ÂèòÈáèÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/Blocks/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40007502">Blocks Programming Topics</a>„ÄÇ</p>
<p>Ë°®4-1ÂàóÂá∫‰∫ÜÂèØ‰ª•‰ªé‰∫ã‰ª∂handler‰ª£Á†Å‰∏≠Ë∞ÉÁî®ÁöÑÂáΩÊï∞Ôºå‰ª•Ëé∑Âèñ‰∫ã‰ª∂ÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<p><strong>Table 4-1</strong> ‰ªéË∞ÉÂ∫¶Ê∫êËé∑ÂèñÊï∞ÊçÆ</p>
<p><code>dispatch_source_get_handle</code>ÔºöËØ•ÂáΩÊï∞ËøîÂõûË∞ÉÂ∫¶Ê∫êÊâÄÁÆ°ÁêÜÁöÑÂ∫ïÂ±ÇÁ≥ªÁªüÊï∞ÊçÆÁ±ªÂûã„ÄÇ</p>
<ul>
<li>ÂØπ‰∫éÊèèËø∞Á¨¶Ë∞ÉÂ∫¶Ê∫êÔºåËØ•ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÂåÖÂê´‰∏éË∞ÉÂ∫¶Ê∫êÁõ∏ÂÖ≥ÁöÑÊèèËø∞Á¨¶ÁöÑ<code>int</code>Á±ªÂûã„ÄÇ</li>
<li>ÂØπ‰∫é‰∏Ä‰∏™‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÔºåËØ•ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™<code>int</code>Á±ªÂûãÔºåÂåÖÂê´ÊúÄËøë‰∫ã‰ª∂ÁöÑ‰ø°Âè∑ÁºñÂè∑„ÄÇ</li>
<li>ÂØπ‰∫é‰∏Ä‰∏™ËøõÁ®ãË∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™<code>pid_t</code>Êï∞ÊçÆÁªìÊûÑÔºåÁî®‰∫éË¢´ÁõëÊéßÁöÑËøõÁ®ã„ÄÇ</li>
<li>ÂØπ‰∫é‰∏Ä‰∏™MachÁ´ØÂè£Ë∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™<code>mach_port_t</code>Êï∞ÊçÆÁªìÊûÑ„ÄÇ</li>
<li>ÂØπ‰∫éÂÖ∂‰ªñË∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõûÁöÑÂÄºÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇ</li>
</ul>
<p><code>dispatch_source_get_data</code> ÔºöÊ≠§ÂáΩÊï∞ËøîÂõû‰∏é‰∫ã‰ª∂Áõ∏ÂÖ≥ÁöÑ‰ªª‰ΩïÊú™ÂÜ≥ÔºàpendingÔºâÊï∞ÊçÆ„ÄÇ</p>
<ul>
<li><p>ÂØπ‰∫é‰ªéÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆÁöÑÊèèËø∞Á¨¶Ë∞ÉÂ∫¶Ê∫êÔºåËØ•ÂáΩÊï∞ËøîÂõûÂèØ‰æõËØªÂèñÁöÑÂ≠óËäÇÊï∞„ÄÇ</p></li>
<li><p>ÂØπ‰∫éÂêëÊñá‰ª∂ÂÜôÊï∞ÊçÆÁöÑÊèèËø∞Á¨¶Ë∞ÉÂ∫¶Ê∫êÔºåÂ¶ÇÊûúÊúâÁ©∫Èó¥ÂèØ‰æõÂÜôÂÖ•ÔºåËØ•ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™Ê≠£Êï¥Êï∞„ÄÇ</p></li>
<li><p>ÂØπ‰∫éÁõëËßÜÊñá‰ª∂Á≥ªÁªüÊ¥ªÂä®ÁöÑÊèèËø∞Á¨¶Ë∞ÉÂ∫¶Ê∫êÔºåËØ•ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™<code>dispatch_source_vnode_flags_t</code>Êûö‰∏æÔºåË°®Á§∫ÊâÄÂèëÁîüÁöÑ‰∫ã‰ª∂ÁöÑÁ±ªÂûã„ÄÇ</p></li>
<li><p>ÂØπ‰∫é‰∏Ä‰∏™ËøõÁ®ãË∞ÉÂ∫¶Ê∫êÔºåËøô‰∏™ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™<code>dispatch_source_proc_flags_t</code>Êûö‰∏æÔºåË°®Á§∫ÂèëÁîüÁöÑ‰∫ã‰ª∂Á±ªÂûã„ÄÇ</p></li>
<li><p>ÂØπ‰∫éMachÁ´ØÂè£Ë∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™<code>dispatch_source_machport_flags_t</code>Êûö‰∏æÔºåË°®Á§∫ÂèëÁîüÁöÑ‰∫ã‰ª∂Á±ªÂûã„ÄÇ</p></li>
<li><p>ÂØπ‰∫éËá™ÂÆö‰πâË∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõû‰ªéÁé∞ÊúâÊï∞ÊçÆÂíå‰º†ÈÄíÁªô<code>dispatch_source_merge_data</code>ÂáΩÊï∞ÁöÑÊñ∞Êï∞ÊçÆÂàõÂª∫ÁöÑÊñ∞Êï∞ÊçÆÂÄº„ÄÇ</p></li>
</ul>
<p><code>dispatch_source_get_mask</code>ÔºöËØ•ÂáΩÊï∞ËøîÂõûÁî®‰∫éÂàõÂª∫Ë∞ÉÂ∫¶Ê∫êÁöÑ‰∫ã‰ª∂Ê†áÂøó„ÄÇ</p>
<ul>
<li><p>ÂØπ‰∫é‰∏Ä‰∏™ËøõÁ®ãË∞ÉÂ∫¶Ê∫êÔºåËØ•ÂáΩÊï∞ËøîÂõûË∞ÉÂ∫¶Ê∫êÊâÄÊé•Êî∂ÁöÑ‰∫ã‰ª∂ÁöÑÊé©Á†ÅÔºà<code>dispatch_source_proc_flags_t</code>Ôºâ„ÄÇ</p></li>
<li><p>ÂØπ‰∫éÂÖ∑ÊúâÂèëÈÄÅÊùÉÈôêÁöÑMachÁ´ØÂè£Ë∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõûÊâÄÈúÄ‰∫ã‰ª∂ÁöÑÊé©Á†ÅÔºà<code>dispatch_source_mach_send_flags_t</code>Ôºâ„ÄÇ</p></li>
<li><p>ÂØπ‰∫é‰∏Ä‰∏™Ëá™ÂÆö‰πâORË∞ÉÂ∫¶Ê∫êÔºåÊ≠§ÂáΩÊï∞ËøîÂõûÁî®‰∫éÂêàÂπ∂Êï∞ÊçÆÂÄºÁöÑÊé©Á†Å„ÄÇ</p></li>
</ul>
<p>ÂÖ≥‰∫éÂ¶Ç‰Ωï‰∏∫ÁâπÂÆöÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫êÁºñÂÜôÂíåÈÖçÁΩÆ‰∫ã‰ª∂handlerÁöÑ‰æãÂ≠êÔºåÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW22">Dispatch Source Examples</a>„ÄÇ</p>
<h3 id="ÈÖçÁΩÆÂèñÊ∂àhandler">ÈÖçÁΩÆÂèñÊ∂àHandler</h3>
<p>ÂèñÊ∂àhandlerÁî®‰∫éÂú®Ë∞ÉÂ∫¶Ê∫êË¢´ÈáäÊîæ‰πãÂâçÂØπÂÖ∂ËøõË°åÊ∏ÖÁêÜ„ÄÇÂØπ‰∫éÂ§ßÂ§öÊï∞Á±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫êÔºåÂèñÊ∂àhandlerÊòØÂèØÈÄâÁöÑÔºåÂè™ÊúâÂΩì‰Ω†Êúâ‰∏Ä‰∫õ‰∏éË∞ÉÂ∫¶Ê∫êÁªëÂÆöÁöÑËá™ÂÆö‰πâË°å‰∏∫‰πüÈúÄË¶ÅË¢´Êõ¥Êñ∞Êó∂ÊâçÊúâÂøÖË¶Å„ÄÇÁÑ∂ËÄåÔºåÂØπ‰∫é‰ΩøÁî®ÊèèËø∞Á¨¶ÊàñMachÁ´ØÂè£ÁöÑË∞ÉÂ∫¶Ê∫êÔºå‰Ω†ÂøÖÈ°ªÊèê‰æõ‰∏Ä‰∏™ÂèñÊ∂àhandlerÊù•ÂÖ≥Èó≠ÊèèËø∞Á¨¶ÊàñÈáäÊîæMachÁ´ØÂè£„ÄÇÂ¶ÇÊûú‰∏çËøôÊ†∑ÂÅöÔºåËøô‰∫õÁªìÊûÑ‰ΩìË¢´‰Ω†ÁöÑ‰ª£Á†ÅÂíåÁ≥ªÁªüÁöÑÂÖ∂‰ªñÈÉ®ÂàÜÊó†ÊÑèÂú∞ÈáçÁî®ÔºåÂèØËÉΩ‰ºöÂØºËá¥‰ª£Á†Å‰∏≠Âá∫Áé∞ÂæÆÂ¶ôÁöÑÈîôËØØ„ÄÇ</p>
<p>ÂèØ‰ª•Âú®‰ªª‰ΩïÊó∂ÂÄôÈÖçÁΩÆÂèñÊ∂àhandlerÔºå‰ΩÜÈÄöÂ∏∏Âú®ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫êÊó∂ËøõË°åÈÖçÁΩÆ„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>dispatch_source_set_cancel_handler</code>Êàñ<code>dispatch_source_set_cancel_handler_f</code>ÂáΩÊï∞Êù•ÈÖçÁΩÆÂèñÊ∂àhandlerÔºåËøôÂèñÂÜ≥‰∫é‰Ω†ÊÉ≥Âú®ÂÆûÁé∞‰∏≠‰ΩøÁî®‰∏Ä‰∏™blockÂØπË±°ËøòÊòØ‰∏Ä‰∏™ÂáΩÊï∞„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòæÁ§∫‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂèñÊ∂àhandlerÔºåÂÆÉÂÖ≥Èó≠‰∫Ü‰∏Ä‰∏™‰∏∫Ë∞ÉÂ∫¶Ê∫êÊâìÂºÄÁöÑÊèèËø∞Á¨¶„ÄÇ<code>fd</code>ÂèòÈáèÊòØ‰∏Ä‰∏™ÂåÖÂê´ÊèèËø∞Á¨¶ÁöÑÊçïËé∑ÂèòÈáè„ÄÇ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_set_cancel_handler(mySource, ^&#123;</span><br><span class="line">   close(fd); <span class="comment">// Close a file descriptor opened earlier.</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="‰øÆÊîπÁõÆÊ†áÈòüÂàó">‰øÆÊîπÁõÆÊ†áÈòüÂàó</h3>
<p>Â∞ΩÁÆ°‰Ω†Âú®ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫êÊó∂ÊåáÂÆö‰∫ÜËøêË°å‰∫ã‰ª∂ÂíåÂèñÊ∂àhandlerÁöÑÈòüÂàóÔºå‰ΩÜ‰Ω†ÂèØ‰ª•Âú®‰ªª‰ΩïÊó∂ÂÄô‰ΩøÁî® <code>dispatch_set_target_queue</code> ÂáΩÊï∞ÊîπÂèòËØ•ÈòüÂàó„ÄÇÈÄöËøáËøôÊ†∑‰Ω†ÂèØ‰ª•ÊîπÂèòË∞ÉÂ∫¶Ê∫êÁöÑ‰∫ã‰ª∂Â§ÑÁêÜÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ</p>
<p>‰øÆÊîπË∞ÉÂ∫¶Ê∫êÁöÑÈòüÂàóÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰ΩúÔºåË∞ÉÂ∫¶Ê∫ê‰ºöÂ∞ΩÊúÄÂ§ßÂä™ÂäõÂ∞ΩÂø´ÂÅöÂá∫‰øÆÊîπ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™‰∫ã‰ª∂handlerÂ∑≤ÁªèÂú®ÈòüÂàó‰∏≠Âπ∂Á≠âÂæÖÂ§ÑÁêÜÔºåÂÆÉÂ∞ÜÂú®‰πãÂâçÁöÑÈòüÂàó‰∏≠ÊâßË°å„ÄÇÁÑ∂ËÄåÔºåÂú®‰Ω†‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñÂà∞ËææÁöÑ‰∫ã‰ª∂ÂèØ‰ª•Âú®‰ªª‰∏ÄÈòüÂàó‰∏≠Â§ÑÁêÜ„ÄÇ</p>
<h3 id="ÂÖ≥ËÅîËá™ÂÆö‰πâÊï∞ÊçÆ‰∏éË∞ÉÂ∫¶Ê∫ê">ÂÖ≥ËÅîËá™ÂÆö‰πâÊï∞ÊçÆ‰∏éË∞ÉÂ∫¶Ê∫ê</h3>
<p>ÂÉèGrand Central Dispatch‰∏≠ÁöÑËÆ∏Â§öÂÖ∂‰ªñÊï∞ÊçÆÁ±ªÂûã‰∏ÄÊ†∑Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>dispatch_set_context</code>ÂáΩÊï∞Êù•Â∞ÜËá™ÂÆö‰πâÊï∞ÊçÆ‰∏éË∞ÉÂ∫¶Ê∫êÂÖ≥ËÅîËµ∑Êù•„ÄÇÂèØ‰ª•‰ΩøÁî®‰∏ä‰∏ãÊñáÊåáÈíàÊù•Â≠òÂÇ®‰∫ã‰ª∂handlerÂú®Â§ÑÁêÜ‰∫ã‰ª∂Êó∂ÈúÄË¶ÅÁöÑ‰ªª‰ΩïÊï∞ÊçÆ„ÄÇÂ¶ÇÊûú‰Ω†Á°ÆÂÆûÂú®‰∏ä‰∏ãÊñáÊåáÈíà‰∏≠Â≠òÂÇ®‰∫Ü‰ªª‰ΩïËá™ÂÆö‰πâÊï∞ÊçÆÔºå‰Ω†‰πüÂ∫îËØ•ËÆæÁΩÆ‰∏Ä‰∏™ÂèñÊ∂àhandlerÔºå‰ª•‰æøÂú®‰∏çÂÜçÈúÄË¶ÅË∞ÉÂ∫¶Ê∫êÊó∂ÈáäÊîæËøô‰∫õÊï∞ÊçÆ„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†‰ΩøÁî®blockÊù•ÂÆûÁé∞‰Ω†ÁöÑ‰∫ã‰ª∂handlerÔºå‰πüÂèØ‰ª•ÊçïËé∑Â±ÄÈÉ®ÂèòÈáèÂπ∂Âú®Âü∫‰∫éblockÁöÑ‰ª£Á†Å‰∏≠‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇÂ∞ΩÁÆ°ËøôÂèØËÉΩÂáèËΩª‰∫ÜÂú®Ë∞ÉÂ∫¶Ê∫êÁöÑ‰∏ä‰∏ãÊñáÊåáÈíà‰∏≠Â≠òÂÇ®Êï∞ÊçÆÁöÑÈúÄË¶ÅÔºå‰ΩÜ‰Ω†Â∫îËØ•ÂßãÁªàË∞®ÊÖéÂú∞‰ΩøÁî®Ëøô‰∏ÄÂäüËÉΩ„ÄÇÂõ†‰∏∫Ë∞ÉÂ∫¶Ê∫êÂú®Á®ãÂ∫è‰∏≠ÂèØËÉΩÊòØÈïøÊúüÂ≠òÂú®ÁöÑÔºåÂú®ÊçïËé∑ÂåÖÂê´ÊåáÈíàÁöÑÂèòÈáèÊó∂Â∫îËØ•Â∞èÂøÉ„ÄÇÂ¶ÇÊûúÊåáÈíàÊâÄÊåáÂêëÁöÑÊï∞ÊçÆÂú®‰ªª‰ΩïÊó∂ÂÄôÈÉΩÂèØËÉΩË¢´ÈáäÊîæÔºå‰Ω†Â∫îËØ•Â§çÂà∂ËØ•Êï∞ÊçÆÊàñ‰øùÁïôÂÆÉ„ÄÇÂú®Ëøô‰∏§ÁßçÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÈÉΩÈúÄË¶ÅÈÖçÁΩÆ‰∏Ä‰∏™ÂèñÊ∂àhandlerÊù•ÈáäÊîæËøô‰∫õÊï∞ÊçÆ„ÄÇ</p>
<h3 id="Ë∞ÉÂ∫¶Ê∫êÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ">Ë∞ÉÂ∫¶Ê∫êÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ</h3>
<p>ÂÉèÂÖ∂‰ªñË∞ÉÂ∫¶ÂØπË±°‰∏ÄÊ†∑ÔºåË∞ÉÂ∫¶Ê∫ê‰πüÊòØÊúâÂºïÁî®ËÆ°Êï∞ÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇ‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÁöÑÂàùÂßãÂºïÁî®ËÆ°Êï∞‰∏∫1ÔºåÂèØ‰ª•‰ΩøÁî®<code>dispatch_retain</code>Âíå<code>dispatch_release</code>ÂáΩÊï∞‰øùÁïôÂíåÈáäÊîæ„ÄÇÂΩì‰∏Ä‰∏™ÈòüÂàóÁöÑÂºïÁî®ËÆ°Êï∞ËææÂà∞0Êó∂ÔºåÁ≥ªÁªü‰ºöËá™Âä®ÈáäÊîæË∞ÉÂ∫¶Ê∫êÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
<p>Áî±‰∫éÂÆÉ‰ª¨ÁöÑ‰ΩøÁî®ÊñπÂºèÔºåË∞ÉÂ∫¶Ê∫êÁöÑÊâÄÊúâÊùÉÂèØ‰ª•Áî±ÂÜÖÈÉ®ÁÆ°ÁêÜÔºå‰πüÂèØ‰ª•Áî±Â§ñÈÉ®ÁÆ°ÁêÜ„ÄÇÂØπ‰∫éÂ§ñÈÉ®ÊâÄÊúâÊùÉÔºåÂè¶‰∏Ä‰∏™ÂØπË±°Êàñ‰∏ÄÊÆµ‰ª£Á†ÅÊã•ÊúâË∞ÉÂ∫¶Ê∫êÁöÑÊâÄÊúâÊùÉÔºåÂπ∂Ë¥üË¥£Âú®‰∏çÂÜçÈúÄË¶ÅÂÆÉÊó∂Â∞ÜÂÖ∂ÈáäÊîæ„ÄÇÂØπ‰∫éÂÜÖÈÉ®ÊâÄÊúâÊùÉÔºåË∞ÉÂ∫¶Ê∫êÊåÅÊúâËá™Â∑±ÔºåÂπ∂Ë¥üË¥£Âú®ÈÄÇÂΩìÁöÑÊó∂ÂÄôÈáäÊîæËá™Â∑±„ÄÇÂ∞ΩÁÆ°Â§ñÈÉ®ÊâÄÊúâÊùÉÈùûÂ∏∏ÊôÆÈÅçÔºå‰ΩÜÂú®‰Ω†ÊÉ≥ÂàõÂª∫‰∏Ä‰∏™Ëá™‰∏ªÁöÑË∞ÉÂ∫¶Ê∫êÂπ∂ËÆ©ÂÆÉÁÆ°ÁêÜ‰Ω†ÁöÑ‰ª£Á†ÅÁöÑÊüê‰∫õË°å‰∏∫ËÄå‰∏çËøõË°å‰ªª‰ΩïËøõ‰∏ÄÊ≠•ÁöÑ‰∫§‰∫íÁöÑÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØËÉΩ‰ºö‰ΩøÁî®ÂÜÖÈÉ®ÊâÄÊúâÊùÉ„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êË¢´ËÆæËÆ°‰∏∫ÂìçÂ∫î‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂÖ®Â±Ä‰∫ã‰ª∂Ôºå‰Ω†ÂèØËÉΩ‰ºöËÆ©ÂÆÉÂ§ÑÁêÜËØ•‰∫ã‰ª∂ÔºåÁÑ∂ÂêéÁ´ãÂç≥ÈÄÄÂá∫„ÄÇ</p>
<h2 id="Ë∞ÉÂ∫¶Ê∫êÁ§∫‰æã">Ë∞ÉÂ∫¶Ê∫êÁ§∫‰æã</h2>
<p>‰∏ãÈù¢ÁöÑÁ´†ËäÇÂêë‰Ω†Â±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÂàõÂª∫ÂíåÈÖçÁΩÆ‰∏Ä‰∫õÊõ¥Â∏∏Áî®ÁöÑË∞ÉÂ∫¶Ê∫ê„ÄÇÂÖ≥‰∫éÈÖçÁΩÆÁâπÂÆöÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫êÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåÂèØÂèÇÈòÖ<em>Grand Central Dispatch (GCD) Reference</em>„ÄÇ</p>
<h3 id="ÂàõÂª∫ÂÆöÊó∂Âô®">ÂàõÂª∫ÂÆöÊó∂Âô®</h3>
<p>ÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫ê‰ª•ÂÆöÊúü„ÄÅÂü∫‰∫éÊó∂Èó¥ÁöÑÈó¥Èöî‰∫ßÁîü‰∫ã‰ª∂„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®ÂÆöÊó∂Âô®Êù•ÂêØÂä®ÈúÄË¶ÅÂÆöÊúüÊâßË°åÁöÑÁâπÂÆö‰ªªÂä°„ÄÇ‰æãÂ¶ÇÔºåÊ∏∏ÊàèÂíåÂÖ∂‰ªñÂõæÂΩ¢ÂØÜÈõÜÂûãÁöÑÁ®ãÂ∫èÂèØ‰ª•‰ΩøÁî®ÂÆöÊó∂Âô®Êù•ÂêØÂä®Â±èÂπïÊàñÂä®ÁîªÁöÑÊõ¥Êñ∞„ÄÇ‰Ω†‰πüÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™ÂÆöÊó∂Âô®Âπ∂‰ΩøÁî®‰∫ßÁîüÁöÑ‰∫ã‰ª∂Êù•Ê£ÄÊü•ÁªèÂ∏∏Êõ¥Êñ∞ÁöÑÊúçÂä°Âô®‰∏äÁöÑÊñ∞‰ø°ÊÅØ„ÄÇ</p>
<p>ÊâÄÊúâÁöÑÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫êÈÉΩÊòØÈó¥ÈöîÊÄßÁöÑÂÆöÊó∂Âô®Ôºå‰πüÂ∞±ÊòØËØ¥Ôºå‰∏ÄÊó¶ÂàõÂª∫ÔºåÂÆÉ‰ª¨Â∞±‰ºöÊåâÁÖß‰Ω†ÊåáÂÆöÁöÑÊó∂Èó¥Èó¥ÈöîÂÆöÊúüÂèëÈÄÅ‰∫ã‰ª∂„ÄÇÂΩì‰Ω†ÂàõÂª∫‰∏Ä‰∏™ÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫êÊó∂Ôºå‰Ω†ÂøÖÈ°ªÊåáÂÆöÁöÑ‰∏Ä‰∏™ÂÄºÊòØ‰∏Ä‰∏™leewayÂÄºÔºå‰ª•‰ΩøÁ≥ªÁªüÁü•ÈÅìÂÆöÊó∂Âô®‰∫ã‰ª∂ÁöÑÊâÄÈúÄÁ≤æÂ∫¶„ÄÇleewayÂÄºËÆ©Á≥ªÁªüÂú®Â¶Ç‰ΩïÁÆ°ÁêÜÁîµÊ∫êÂíåÂî§ÈÜíÂÜÖÊ†∏ÊñπÈù¢Êúâ‰∏ÄÂÆöÁöÑÁÅµÊ¥ªÊÄß„ÄÇ‰æãÂ¶ÇÔºåÁ≥ªÁªüÂèØËÉΩ‰ºö‰ΩøÁî®leewayÂÄºÊù•ÊèêÂâçÊàñÊé®ËøüÂêØÂä®Êó∂Èó¥ÔºåÂπ∂‰ΩøÂÖ∂‰∏éÂÖ∂‰ªñÁ≥ªÁªü‰∫ã‰ª∂Êõ¥Â•ΩÂú∞ÂçèË∞É„ÄÇÂõ†Ê≠§Ôºå‰Ω†Â∫îËØ•Â∞ΩÂèØËÉΩ‰∏∫‰Ω†Ëá™Â∑±ÁöÑÂÆöÊó∂Âô®ÊåáÂÆö‰∏Ä‰∏™leewayÂÄº„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÔºö</strong>Âç≥‰Ωø‰Ω†ÊåáÂÆö‰∫Ü‰∏Ä‰∏™0ÁöÑleewayÂÄºÔºå‰Ω†‰πü‰∏çÂ∫îËØ•ÊúüÊúõÂÆöÊó∂Âô®Âú®‰Ω†Ë¶ÅÊ±ÇÁöÑÁ≤æÁ°ÆÁ∫≥ÁßíÂ§ÑÂêØÂä®„ÄÇÁ≥ªÁªü‰ºöÂ∞ΩÂäõÊª°Ë∂≥‰Ω†ÁöÑÈúÄÊ±ÇÔºå‰ΩÜ‰∏çËÉΩ‰øùËØÅÁ≤æÁ°ÆÁöÑÂêØÂä®Êó∂Èó¥„ÄÇ</p>
<p>ÂΩìËÆ°ÁÆóÊú∫ËøõÂÖ•Áù°Áú†Áä∂ÊÄÅÊó∂ÔºåÊâÄÊúâÁöÑÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫êÈÉΩË¢´ÊöÇÂÅú„ÄÇÂΩìËÆ°ÁÆóÊú∫Âî§ÈÜíÊó∂ÔºåËøô‰∫õÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫ê‰πü‰ºöË¢´Ëá™Âä®Âî§ÈÜí„ÄÇÊ†πÊçÆÂÆöÊó∂Âô®ÁöÑÈÖçÁΩÆÔºåËøôÁßçÊÄßË¥®ÁöÑÊöÇÂÅúÂèØËÉΩ‰ºöÂΩ±ÂìçÂÆöÊó∂Âô®‰∏ã‰∏ÄÊ¨°Ëß¶ÂèëÁöÑÊó∂Èó¥„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®<code>dispatch_time</code>ÂáΩÊï∞Êàñ<code>DISPATCH_TIME_NOW</code>Â∏∏Êï∞Êù•ËÆæÁΩÆ‰Ω†ÁöÑÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫êÔºåÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫ê‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÁ≥ªÁªüÊó∂ÈíüÊù•ÂÜ≥ÂÆö‰ΩïÊó∂ÂêØÂä®„ÄÇÁÑ∂ËÄåÔºåÂΩìËÆ°ÁÆóÊú∫Â§Ñ‰∫éÁù°Áú†Áä∂ÊÄÅÊó∂ÔºåÈªòËÆ§ÁöÑÊó∂Èíü‰∏ç‰ºöÂâçËøõ„ÄÇÁõ∏ÊØî‰πã‰∏ãÔºåÂΩì‰Ω†‰ΩøÁî®<code>dispatch_walltime</code>ÂáΩÊï∞ËÆæÁΩÆ‰Ω†ÁöÑÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫êÊó∂ÔºåÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫ê‰ºöË∑üË∏™ÂÖ∂Ëß¶ÂèëÊó∂Èó¥Âà∞ÁªùÂØπÔºàwallÔºâÁöÑÊó∂ÈíüÊó∂Èó¥„ÄÇÂêéËÄÖÈÄöÂ∏∏ÈÄÇÁî®‰∫éËß¶ÂèëÈó¥ÈöîÊØîËæÉÂ§ßÁöÑÂÆöÊó∂Âô®ÔºåÂõ†‰∏∫ÂÆÉÂèØ‰ª•Èò≤Ê≠¢‰∫ã‰ª∂Êó∂Èó¥‰πãÈó¥ÊúâÂ§™Â§ßÁöÑÊºÇÁßª„ÄÇ</p>
<p>Ê∏ÖÂçï4-1ÊòæÁ§∫‰∫Ü‰∏Ä‰∏™ÂÆöÊó∂Âô®ÁöÑ‰æãÂ≠êÔºåÂÆÉÊØè30ÁßíËß¶Âèë‰∏ÄÊ¨°Ôºåleeway‰∏∫1Áßí„ÄÇÂõ†‰∏∫ÂÆöÊó∂Âô®ÁöÑÊó∂Èó¥Èó¥ÈöîÊØîËæÉÂ§ßÔºåÊâÄ‰ª•‰ΩøÁî®<code>dispatch_walltime</code>ÂáΩÊï∞Êù•ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫ê„ÄÇËÆ°Êó∂Âô®ÁöÑÁ¨¨‰∏ÄÊ¨°Ëß¶ÂèëÁ´ãÂç≥ÂèëÁîüÔºåÈöèÂêéÁöÑ‰∫ã‰ª∂ÊØè30ÁßíÂà∞Ëææ„ÄÇ<code>MyPeriodicTask</code>Âíå<code>MyStoreTimer</code>Á¨¶Âè∑‰ª£Ë°®Ëá™ÂÆö‰πâÂáΩÊï∞ÔºåÁºñÂÜôËøô‰∫õÂáΩÊï∞Êù•ÂÆûÁé∞ÂÆöÊó∂Âô®Ë°å‰∏∫ÔºåÂπ∂Â∞ÜÂÆöÊó∂Âô®Â≠òÂÇ®Âú®Á®ãÂ∫èÊï∞ÊçÆÁªìÊûÑÁöÑÊüê‰∏™Âú∞Êñπ„ÄÇ</p>
<p>‰∏ãÈù¢Â±ïÁ§∫‰∫Ü‰∏Ä‰∏™Èó¥Èöî 30s leeaway 1s ÁöÑtimer„ÄÇÂõ†‰∏∫Èó¥ÈöîËæÉÂ§ßÔºådispatch source ‰ΩøÁî® <code>dispatch_walltime</code> Êù•ÂàõÂª∫ÁöÑ„ÄÇtimer ÂàùÊ¨°‰ºöÁ´ãÂç≥ fireÔºå‰πãÂêéÊØè 30s Âà∞Ëææ‰∏ÄÊ¨°„ÄÇ</p>
<p><strong>Ê∏ÖÂçï4-1</strong> ÂàõÂª∫ÂÆöÊó∂Âô®Êï∞ÊçÆÊ∫ê</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_t CreateDispatchTimer(uint64_t interval,</span><br><span class="line">              uint64_t leeway,</span><br><span class="line">              <span class="built_in">dispatch_queue_t</span> queue,</span><br><span class="line">              dispatch_block_t block)</span><br><span class="line">&#123;</span><br><span class="line">   dispatch_source_t timer = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,</span><br><span class="line">                                                     <span class="number">0</span>, <span class="number">0</span>, queue);</span><br><span class="line">   <span class="keyword">if</span> (timer)</span><br><span class="line">   &#123;</span><br><span class="line">      dispatch_source_set_timer(timer, dispatch_walltime(<span class="literal">NULL</span>, <span class="number">0</span>), interval, leeway);</span><br><span class="line">      dispatch_source_set_event_handler(timer, block);</span><br><span class="line">      dispatch_resume(timer);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">return</span> timer;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">void</span> MyCreateTimer()</span><br><span class="line">&#123;</span><br><span class="line">   dispatch_source_t aTimer = CreateDispatchTimer(<span class="number">30</span>ull * <span class="built_in">NSEC_PER_SEC</span>,</span><br><span class="line">                               <span class="number">1</span>ull * <span class="built_in">NSEC_PER_SEC</span>,</span><br><span class="line">                               dispatch_get_main_queue(),</span><br><span class="line">                               ^&#123; MyPeriodicTask(); &#125;);</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// Store it somewhere for later use.</span></span><br><span class="line">    <span class="keyword">if</span> (aTimer)</span><br><span class="line">    &#123;</span><br><span class="line">        MyStoreTimer(aTimer);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Â∞ΩÁÆ°ÂàõÂª∫‰∏Ä‰∏™ÂÆöÊó∂Âô®Ë∞ÉÂ∫¶Ê∫êÊòØÊé•Êî∂Âü∫‰∫éÊó∂Èó¥ÁöÑ‰∫ã‰ª∂ÁöÑ‰∏ªË¶ÅÊñπÂºèÔºå‰ΩÜ‰πüÊúâÂÖ∂‰ªñÈÄâÊã©„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥Âú®ÊåáÂÆöÁöÑÊó∂Èó¥Èó¥ÈöîÂêéÊâßË°å‰∏ÄÊ¨°blockÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>dispatch_after</code>Êàñ<code>dispatch_after_f</code>ÂáΩÊï∞„ÄÇËøô‰∏™ÂáΩÊï∞ÁöÑ‰ΩúÁî®‰∏é<code>dispatch_async</code>ÂáΩÊï∞ÂæàÁõ∏‰ººÔºåÂè™ÊòØÂÆÉÂÖÅËÆ∏‰Ω†ÊåáÂÆö‰∏Ä‰∏™Êó∂Èó¥ÂÄºÔºåÂú®Ëøô‰∏™Êó∂Èó¥ÂÄº‰∏äÂ∞ÜblockÊèê‰∫§ÁªôÈòüÂàó„ÄÇÊ†πÊçÆ‰Ω†ÁöÑÈúÄË¶ÅÔºåÊó∂Èó¥ÂÄºÂèØ‰ª•ÊåáÂÆö‰∏∫‰∏Ä‰∏™Áõ∏ÂØπÁöÑÊàñÁªùÂØπÁöÑÊó∂Èó¥ÂÄº„ÄÇ</p>
<h3 id="‰ªéÊèèËø∞Á¨¶‰∏≠ËØªÂèñÊï∞ÊçÆ">‰ªéÊèèËø∞Á¨¶‰∏≠ËØªÂèñÊï∞ÊçÆ</h3>
<p>Ë¶Å‰ªéÊñá‰ª∂ÊàñÂ•óÊé•Â≠ó‰∏≠ËØªÂèñÊï∞ÊçÆÔºå‰Ω†ÂøÖÈ°ªÊâìÂºÄÊñá‰ª∂ÊàñÂ•óÊé•Â≠óÔºåÂπ∂ÂàõÂª∫‰∏Ä‰∏™<code>DISPATCH_SOURCE_TYPE_READ</code>Á±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫ê„ÄÇÊåáÂÆöÁöÑ‰∫ã‰ª∂handlerÂ∫îËØ•ËÉΩÂ§üËØªÂèñÂíåÂ§ÑÁêÜÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÂÜÖÂÆπ„ÄÇÂú®Â§ÑÁêÜÊñá‰ª∂ÁöÑÊÉÖÂÜµ‰∏ãÔºåËøôÁõ∏ÂΩì‰∫éËØªÂèñÊñá‰ª∂Êï∞ÊçÆÔºàÊàñËØ•Êï∞ÊçÆÁöÑ‰∏Ä‰∏™Â≠êÈõÜÔºâÔºåÂπ∂‰∏∫Á®ãÂ∫èÂàõÂª∫ÈÄÇÂΩìÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂØπ‰∫éÁΩëÁªúÂ•óÊé•Â≠óÔºåËøôÊ∂âÂèäÂà∞Â§ÑÁêÜÊñ∞Êî∂Âà∞ÁöÑÁΩëÁªúÊï∞ÊçÆ„ÄÇ</p>
<p>ÊØèÂΩìËØªÂèñÊï∞ÊçÆÊó∂Ôºå‰Ω†Â∫îËØ•ÂßãÁªàÂ∞ÜÊèèËø∞Á¨¶ÈÖçÁΩÆ‰∏∫‰ΩøÁî®ÈùûÈòªÂ°ûÊìç‰Ωú„ÄÇÂ∞ΩÁÆ°ÂèØ‰ª•‰ΩøÁî®<code>dispatch_source_get_data</code>ÂáΩÊï∞Êù•Êü•ÁúãÊúâÂ§öÂ∞ëÊï∞ÊçÆÂèØ‰æõËØªÂèñÔºå‰ΩÜËØ•ÂáΩÊï∞ËøîÂõûÁöÑÂÄºÂú®‰Ω†Ë∞ÉÁî®Êó∂Âíå‰Ω†ÂÆûÈôÖËØªÂèñÊï∞ÊçÆÊó∂ÂèØËÉΩÂèëÁîüÂèòÂåñ„ÄÇÂ¶ÇÊûúÂ∫ïÂ±ÇÊñá‰ª∂Ë¢´Êà™Êñ≠ÊàñÂèëÁîüÁΩëÁªúÈîôËØØÔºå‰ªéÊèèËø∞Á¨¶‰∏≠ËØªÂèñÁöÑÊï∞ÊçÆ‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºå‰ªéËÄå‰Ωø‰Ω†ÁöÑ‰∫ã‰ª∂handlerÂú®ÊâßË°åËøáÁ®ã‰∏≠Âç°Ê≠ªÔºåÈòªÂ°ûË∞ÉÂ∫¶ÈòüÂàóÂÖ∂‰ªñ‰ªªÂä°„ÄÇÂØπ‰∫é‰∏Ä‰∏™‰∏≤Ë°åÈòüÂàóÔºåËøôÂèØËÉΩ‰ºö‰ΩøÈòüÂàóÈÄ†ÊàêÊ≠ªÈîÅÔºåÁîöËá≥ÂØπ‰∫é‰∏Ä‰∏™Âπ∂ÂèëÈòüÂàóÔºåËøô‰πü‰ºöÂâäÂáèÂèØÂêØÂä®ÁöÑÊñ∞‰ªªÂä°ÁöÑÊï∞Èáè„ÄÇ</p>
<p>Ê∏ÖÂçï4-2ÊòæÁ§∫‰∫Ü‰∏Ä‰∏™ÈÖçÁΩÆË∞ÉÂ∫¶Ê∫ê‰ª•‰ªéÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆÁöÑ‰æãÂ≠ê„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰∫ã‰ª∂handlerÂ∞ÜÊåáÂÆöÊñá‰ª∂ÁöÑÂÖ®ÈÉ®ÂÜÖÂÆπËØªÂÖ•‰∏Ä‰∏™ÁºìÂÜ≤Âå∫ÔºåÂπ∂Ë∞ÉÁî®‰∏Ä‰∏™Ëá™ÂÆö‰πâÂáΩÊï∞Êù•Â§ÑÁêÜËøô‰∫õÊï∞ÊçÆ„ÄÇËØ•ÂáΩÊï∞ÁöÑË∞ÉÁî®ËÄÖÂ∞Ü‰ΩøÁî®ËøîÂõûÁöÑË∞ÉÂ∫¶Ê∫êÔºåÂú®ËØªÂèñÊìç‰ΩúÂÆåÊàêÂêéÂèñÊ∂àÂÆÉ„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øùË∞ÉÂ∫¶ÈòüÂàóÂú®Ê≤°ÊúâÊï∞ÊçÆÂèØËØªÊó∂‰∏ç‰ºöÂá∫Áé∞‰∏çÂøÖË¶ÅÁöÑÈòªÂ°ûÔºåÊú¨‰æã‰ΩøÁî®<code>fcntl</code>ÂáΩÊï∞Êù•ÈÖçÁΩÆÊñá‰ª∂ÊèèËø∞Á¨¶Ôºå‰ΩøÂÖ∂ÊâßË°åÈùûÈòªÂ°ûÊìç‰Ωú„ÄÇÈÖçÁΩÆÂú®Ë∞ÉÂ∫¶Ê∫ê‰∏äÁöÑÂèñÊ∂àhandlerÁ°Æ‰øùÊñá‰ª∂ÊèèËø∞Á¨¶Âú®Êï∞ÊçÆË¢´ËØªÂèñÂêéË¢´ÂÖ≥Èó≠„ÄÇ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_t ProcessContentsOfFile(<span class="keyword">const</span> <span class="keyword">char</span>* filename)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// Prepare the file for reading.</span></span><br><span class="line">   <span class="keyword">int</span> fd = open(filename, O_RDONLY);</span><br><span class="line">   <span class="keyword">if</span> (fd == <span class="number">-1</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">   fcntl(fd, F_SETFL, O_NONBLOCK);  <span class="comment">// Avoid blocking the read operation</span></span><br><span class="line"> </span><br><span class="line">   <span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">   dispatch_source_t readSource = dispatch_source_create(DISPATCH_SOURCE_TYPE_READ,</span><br><span class="line">                                   fd, <span class="number">0</span>, queue);</span><br><span class="line">   <span class="keyword">if</span> (!readSource)</span><br><span class="line">   &#123;</span><br><span class="line">      close(fd);</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// Install the event handler</span></span><br><span class="line">   dispatch_source_set_event_handler(readSource, ^&#123;</span><br><span class="line">      size_t estimated = dispatch_source_get_data(readSource) + <span class="number">1</span>;</span><br><span class="line">      <span class="comment">// Read the data into a text buffer.</span></span><br><span class="line">      <span class="keyword">char</span>* buffer = (<span class="keyword">char</span>*)malloc(estimated);</span><br><span class="line">      <span class="keyword">if</span> (buffer)</span><br><span class="line">      &#123;</span><br><span class="line">         ssize_t actual = read(fd, buffer, (estimated));</span><br><span class="line">         Boolean done = MyProcessFileData(buffer, actual);  <span class="comment">// Process the data.</span></span><br><span class="line"> </span><br><span class="line">         <span class="comment">// Release the buffer when done.</span></span><br><span class="line">         free(buffer);</span><br><span class="line"> </span><br><span class="line">         <span class="comment">// If there is no more data, cancel the source.</span></span><br><span class="line">         <span class="keyword">if</span> (done)</span><br><span class="line">            dispatch_source_cancel(readSource);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// Install the cancellation handler</span></span><br><span class="line">   dispatch_source_set_cancel_handler(readSource, ^&#123;close(fd);&#125;);</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// Start reading the file.</span></span><br><span class="line">   dispatch_resume(readSource);</span><br><span class="line">   <span class="keyword">return</span> readSource;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåËá™ÂÆö‰πâÁöÑ<code>MyProcessFileData</code>ÂáΩÊï∞ÂÜ≥ÂÆö‰∫Ü‰ªÄ‰πàÊó∂ÂÄôÂ∑≤ÁªèËØªÂèñ‰∫ÜË∂≥Â§üÁöÑÊñá‰ª∂Êï∞ÊçÆÔºå‰ªÄ‰πàÊó∂ÂÄôÂèñÊ∂àË∞ÉÂ∫¶Ê∫ê„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰∏∫‰ªéÊèèËø∞Á¨¶‰∏≠ËØªÂèñÊï∞ÊçÆËÄåÈÖçÁΩÆÁöÑË∞ÉÂ∫¶Ê∫ê‰ºöÂú®‰ªçÊúâÊï∞ÊçÆÈúÄË¶ÅËØªÂèñÊó∂ÈáçÂ§çË∞ÉÂ∫¶ÂÖ∂‰∫ã‰ª∂handler„ÄÇÂ¶ÇÊûúÂ•óÊé•Â≠óËøûÊé•ÂÖ≥Èó≠ÊàñÂà∞ËææÊñá‰ª∂ÁöÑÊú´Â∞æÔºåË∞ÉÂ∫¶Ê∫ê‰ºöËá™Âä®ÂÅúÊ≠¢Ë∞ÉÂ∫¶‰∫ã‰ª∂handler„ÄÇÂ¶ÇÊûúÁ°ÆÂÆö‰∏çÈúÄË¶Å‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÔºåÂèØ‰ª•Ëá™Â∑±Áõ¥Êé•ÂèñÊ∂àÂÆÉ„ÄÇ</p>
<h3 id="ÊääÊï∞ÊçÆÂÜôÂÖ•ÊèèËø∞Á¨¶‰∏≠">ÊääÊï∞ÊçÆÂÜôÂÖ•ÊèèËø∞Á¨¶‰∏≠</h3>
<p>ÂêëÊñá‰ª∂ÊàñÂ•óÊé•Â≠óÂÜôÊï∞ÊçÆÁöÑËøáÁ®ã‰∏éËØªÊï∞ÊçÆÁöÑËøáÁ®ãÈùûÂ∏∏Áõ∏‰ºº„ÄÇÂú®‰∏∫ÂÜôÊìç‰ΩúÈÖçÁΩÆÊèèËø∞Á¨¶ÂêéÔºå‰Ω†Ë¶ÅÂàõÂª∫‰∏Ä‰∏™<code>DISPATCH_SOURCE_TYPE_WRITE</code>Á±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫ê„ÄÇ‰∏ÄÊó¶ËØ•Ë∞ÉÂ∫¶Ê∫êË¢´ÂàõÂª∫ÔºåÁ≥ªÁªüÂ∞±‰ºöË∞ÉÁî®‰Ω†ÁöÑ‰∫ã‰ª∂handlerÔºåËÆ©ÂÆÉÊúâÊú∫‰ºöÂºÄÂßãÂêëÊñá‰ª∂ÊàñÂ•óÊé•Â≠óÂÜôÂÖ•Êï∞ÊçÆ„ÄÇÂΩì‰Ω†ÂÜôÂÆåÊï∞ÊçÆÂêéÔºå‰ΩøÁî®<code>dispatch_source_cancel</code>ÂáΩÊï∞Êù•ÂèñÊ∂àË∞ÉÂ∫¶Ê∫ê„ÄÇ</p>
<p>Êó†ËÆ∫‰ªÄ‰πàÊó∂ÂÄôÂÜôÊï∞ÊçÆÔºå‰Ω†ÈÉΩÂ∫îËØ•Â∞ÜÊñá‰ª∂ÊèèËø∞Á¨¶ÈÖçÁΩÆ‰∏∫‰ΩøÁî®ÈùûÈòªÂ°ûÊìç‰Ωú„ÄÇÂ∞ΩÁÆ°‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>dispatch_source_get_data</code>ÂáΩÊï∞Êù•Êü•ÁúãÊúâÂ§öÂ∞ëÁ©∫Èó¥ÂèØ‰æõÂÜôÂÖ•Ôºå‰ΩÜËØ•ÂáΩÊï∞ËøîÂõûÁöÑÂÄºÂè™ÊòØÊåáÂØºÊÄßÁöÑÔºåÂú®‰Ω†Ë∞ÉÁî®Êó∂Âíå‰Ω†ÂÆûÈôÖÂÜôÂÖ•Êï∞ÊçÆÊó∂ÂèØËÉΩÂèëÁîüÂèòÂåñ„ÄÇÂ¶ÇÊûúÂèëÁîüÈîôËØØÔºåÂêë‰∏Ä‰∏™ÈòªÂ°ûÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÂÜôÂÖ•Êï∞ÊçÆÂèØËÉΩ‰ºö‰Ωø‰Ω†ÁöÑ‰∫ã‰ª∂handlerÂú®ÊâßË°åËøáÁ®ã‰∏≠Âç°Ê≠ªÔºåÂπ∂ÈòªÂ°ûË∞ÉÂ∫¶ÈòüÂàóÂÖ∂‰ªñ‰ªªÂä°„ÄÇÂØπ‰∫é‰∏Ä‰∏™‰∏≤Ë°åÈòüÂàóÔºåËøôÂèØËÉΩ‰ºö‰Ωø‰Ω†ÁöÑÈòüÂàóÈÄ†ÊàêÊ≠ªÈîÅÔºåÁîöËá≥ÂØπ‰∫é‰∏Ä‰∏™Âπ∂ÂèëÈòüÂàóÔºåËøô‰πü‰ºöÂâäÂáèÂèØ‰ª•ÂêØÂä®ÁöÑÊñ∞‰ªªÂä°ÁöÑÊï∞Èáè„ÄÇ</p>
<p>Ê∏ÖÂçï4-3ÊòæÁ§∫‰∫Ü‰ΩøÁî®Ë∞ÉÂ∫¶Ê∫êÂêëÊñá‰ª∂ÂÜôÂÖ•Êï∞ÊçÆÁöÑÂü∫Êú¨ÊñπÊ≥ï„ÄÇÂú®ÂàõÂª∫Êñ∞Êñá‰ª∂ÂêéÔºåËØ•ÂáΩÊï∞Â∞Ü‰∫ßÁîüÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶‰º†ÈÄíÁªôÂÖ∂‰∫ã‰ª∂handler„ÄÇË¢´ÊîæÂÖ•Êñá‰ª∂ÁöÑÊï∞ÊçÆÊòØÁî±<code>MyGetData</code>ÂáΩÊï∞Êèê‰æõÁöÑÔºå‰Ω†ÂèØ‰ª•Áî®ÈúÄË¶ÅÁöÑ‰ªª‰Ωï‰ª£Á†ÅÊù•ÊõøÊç¢ÂÆÉÔºå‰ª•ÁîüÊàêÊñá‰ª∂ÁöÑÊï∞ÊçÆ„ÄÇÂ∞ÜÊï∞ÊçÆÂÜôÂÖ•Êñá‰ª∂ÂêéÔºå‰∫ã‰ª∂handlerÂèñÊ∂à‰∫ÜË∞ÉÂ∫¶Ê∫êÔºå‰ª•Èò≤Ê≠¢ÂÆÉË¢´ÂÜçÊ¨°Ë∞ÉÁî®„ÄÇÁÑ∂ÂêéÔºåË∞ÉÂ∫¶Ê∫êÁöÑÊâÄÊúâËÄÖÂ∞ÜË¥üË¥£ÈáäÊîæÂÆÉ„ÄÇ</p>
<p><strong>Ê∏ÖÂçï4-3</strong> ÂêëÊñá‰ª∂ÂÜôÂÖ•Êï∞ÊçÆ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_t WriteDataToFile(<span class="keyword">const</span> <span class="keyword">char</span>* filename)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> fd = open(filename, O_WRONLY | O_CREAT | O_TRUNC,</span><br><span class="line">                      (S_IRUSR | S_IWUSR | S_ISUID | S_ISGID));</span><br><span class="line">    <span class="keyword">if</span> (fd == <span class="number">-1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    fcntl(fd, F_SETFL); <span class="comment">// Block during the write.</span></span><br><span class="line"> </span><br><span class="line">    <span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">    dispatch_source_t writeSource = dispatch_source_create(DISPATCH_SOURCE_TYPE_WRITE,</span><br><span class="line">                            fd, <span class="number">0</span>, queue);</span><br><span class="line">    <span class="keyword">if</span> (!writeSource)</span><br><span class="line">    &#123;</span><br><span class="line">        close(fd);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    dispatch_source_set_event_handler(writeSource, ^&#123;</span><br><span class="line">        size_t bufferSize = MyGetDataSize();</span><br><span class="line">        <span class="keyword">void</span>* buffer = malloc(bufferSize);</span><br><span class="line"> </span><br><span class="line">        size_t actual = MyGetData(buffer, bufferSize);</span><br><span class="line">        write(fd, buffer, actual);</span><br><span class="line"> </span><br><span class="line">        free(buffer);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// Cancel and release the dispatch source when done.</span></span><br><span class="line">        dispatch_source_cancel(writeSource);</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    dispatch_source_set_cancel_handler(writeSource, ^&#123;close(fd);&#125;);</span><br><span class="line">    dispatch_resume(writeSource);</span><br><span class="line">    <span class="keyword">return</span> (writeSource);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ÁõëÊéßÊñá‰ª∂Á≥ªÁªüÂØπË±°">ÁõëÊéßÊñá‰ª∂Á≥ªÁªüÂØπË±°</h3>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥ÁõëËßÜ‰∏Ä‰∏™Êñá‰ª∂Á≥ªÁªüÂØπË±°ÁöÑÂèòÂåñÔºå‰Ω†ÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™<code>DISPATCH_SOURCE_TYPE_VNODE</code>Á±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫ê„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®ËøôÁßçÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫êÔºåÂú®Êñá‰ª∂Ë¢´Âà†Èô§„ÄÅÂÜôÂÖ•ÊàñÈáçÂëΩÂêçÊó∂Êé•Êî∂ÈÄöÁü•„ÄÇ‰Ω†‰πüÂèØ‰ª•Áî®ÂÆÉÂú®Êñá‰ª∂ÁöÑÁâπÂÆöÁ±ªÂûãÁöÑÂÖÉ‰ø°ÊÅØÔºàÂ¶ÇÂÆÉÁöÑÂ§ßÂ∞èÂíåÈìæÊé•Êï∞ÔºâÂèëÁîüÂèòÂåñÊó∂ÂæóÂà∞ÈÄöÁü•„ÄÇ</p>
<p><strong>Ê≥®ÊÑèÔºö</strong>‰Ω†‰∏∫Ë∞ÉÂ∫¶Ê∫êÊåáÂÆöÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶ÂøÖÈ°ªÂú®Ê∫êÊú¨Ë∫´Â§ÑÁêÜ‰∫ã‰ª∂Êó∂‰øùÊåÅÊâìÂºÄ„ÄÇ</p>
<p>Ê∏ÖÂçï4-4ÊòæÁ§∫‰∫Ü‰∏Ä‰∏™‰æãÂ≠êÔºåÂÆÉÁõëËßÜ‰∏Ä‰∏™Êñá‰ª∂ÂêçÂèòÂåñÔºåÂπ∂Âú®ÂÆÉÂèëÁîüÂèòÂåñÊó∂ÊâßË°å‰∏Ä‰∫õËá™ÂÆö‰πâË°å‰∏∫„ÄÇ(‰Ω†ÂèØ‰ª•Êèê‰æõÂÆûÈôÖÁöÑË°å‰∏∫Êù•‰ª£Êõø‰æãÂ≠ê‰∏≠Ë∞ÉÁî®ÁöÑ <code>MyUpdateFileName</code> ÂáΩÊï∞„ÄÇ)Âõ†‰∏∫‰∏Ä‰∏™ÊèèËø∞Á¨¶ÊòØ‰∏ìÈó®‰∏∫Ë∞ÉÂ∫¶Ê∫êÊâìÂºÄÁöÑÔºåÊâÄ‰ª•Ë∞ÉÂ∫¶Ê∫êÂåÖÂê´‰∏Ä‰∏™ÂÖ≥Èó≠ÊèèËø∞Á¨¶ÁöÑÂèñÊ∂àhandler„ÄÇÂõ†‰∏∫Êú¨‰æãÂàõÂª∫ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶‰∏éÂ∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªüÂØπË±°Áõ∏ÂÖ≥ËÅîÔºåÁõ∏ÂêåÁöÑË∞ÉÂ∫¶Ê∫êÂèØ‰ª•Áî®Êù•Ê£ÄÊµã‰ªª‰ΩïÊï∞ÈáèÁöÑÊñá‰ª∂ÂêçÂèòÂåñ„ÄÇ</p>
<p><strong>Ê∏ÖÂçï4-4</strong> ËßÇÂØüÊñá‰ª∂ÂêçÂèòÂåñ</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">dispatch_source_t MonitorNameChangesToFile(<span class="keyword">const</span> <span class="keyword">char</span>* filename)</span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">int</span> fd = open(filename, O_EVTONLY);</span><br><span class="line">   <span class="keyword">if</span> (fd == <span class="number">-1</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"> </span><br><span class="line">   <span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">   dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE,</span><br><span class="line">                fd, DISPATCH_VNODE_RENAME, queue);</span><br><span class="line">   <span class="keyword">if</span> (source)</span><br><span class="line">   &#123;</span><br><span class="line">      <span class="comment">// Copy the filename for later use.</span></span><br><span class="line">      <span class="keyword">int</span> length = strlen(filename);</span><br><span class="line">      <span class="keyword">char</span>* newString = (<span class="keyword">char</span>*)malloc(length + <span class="number">1</span>);</span><br><span class="line">      newString = strcpy(newString, filename);</span><br><span class="line">      dispatch_set_context(source, newString);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// Install the event handler to process the name change</span></span><br><span class="line">      dispatch_source_set_event_handler(source, ^&#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">char</span>*  oldFilename = (<span class="keyword">char</span>*)dispatch_get_context(source);</span><br><span class="line">            MyUpdateFileName(oldFilename, fd);</span><br><span class="line">      &#125;);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// Install a cancellation handler to free the descriptor</span></span><br><span class="line">      <span class="comment">// and the stored string.</span></span><br><span class="line">      dispatch_source_set_cancel_handler(source, ^&#123;</span><br><span class="line">          <span class="keyword">char</span>* fileStr = (<span class="keyword">char</span>*)dispatch_get_context(source);</span><br><span class="line">          free(fileStr);</span><br><span class="line">          close(fd);</span><br><span class="line">      &#125;);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// Start processing events.</span></span><br><span class="line">      dispatch_resume(source);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      close(fd);</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">return</span> source;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ÁõëÊéß‰ø°Âè∑">ÁõëÊéß‰ø°Âè∑</h3>
<p>UNIX‰ø°Âè∑ÂÖÅËÆ∏‰ªé‰∏Ä‰∏™Á®ãÂ∫èÂ§ñÂØπÂÖ∂ËøõË°åÊìçÁ∫µ„ÄÇ‰∏Ä‰∏™Á®ãÂ∫èÂèØ‰ª•Êé•Êî∂ËÆ∏Â§ö‰∏çÂêåÁ±ªÂûãÁöÑ‰ø°Âè∑Ôºå‰ªé‰∏çÂèØÊÅ¢Â§çÁöÑÈîôËØØÔºàÂ¶ÇÈùûÊ≥ïÊåá‰ª§ÔºâÂà∞ÈáçË¶Å‰ø°ÊÅØÁöÑÈÄöÁü•ÔºàÂ¶Ç‰∏Ä‰∏™Â≠êËøõÁ®ãÈÄÄÂá∫Êó∂Ôºâ„ÄÇ‰º†Áªü‰∏äÔºåÁ®ãÂ∫è‰ΩøÁî®<code>sigaction</code>ÂáΩÊï∞Êù•ÈÖçÁΩÆ‰∏Ä‰∏™‰ø°Âè∑Â§ÑÁêÜÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞Âú®‰ø°Âè∑Âà∞ËææÂêéÁ´ãÂç≥ÂêåÊ≠•Â§ÑÁêÜ„ÄÇÂ¶ÇÊûú‰Ω†Âè™ÊòØÊÉ≥ÂæóÂà∞‰ø°Âè∑Âà∞ËææÁöÑÈÄöÁü•ÔºåËÄå‰∏çÊòØÁúüÁöÑÊÉ≥Â§ÑÁêÜ‰ø°Âè∑Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÊù•ÂºÇÊ≠•Â§ÑÁêÜ‰ø°Âè∑„ÄÇ</p>
<p>‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫ê‰∏çËÉΩÊõø‰ª£‰ΩøÁî®<code>sigaction</code>ÂáΩÊï∞ÈÖçÁΩÆÁöÑÂêåÊ≠•‰ø°Âè∑handler„ÄÇÂêåÊ≠•‰ø°Âè∑handlerÂÆûÈôÖ‰∏äÂèØ‰ª•ÊçïËé∑‰∏Ä‰∏™‰ø°Âè∑Âπ∂Èò≤Ê≠¢ÂÆÉÁªàÊ≠¢Á®ãÂ∫è„ÄÇ‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÂÖÅËÆ∏‰Ω†Âè™ÁõëÊéß‰ø°Âè∑ÁöÑÂà∞Ëææ„ÄÇÊ≠§Â§ñÔºå‰Ω†‰∏çËÉΩ‰ΩøÁî®‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÊù•Ê£ÄÁ¥¢ÊâÄÊúâÁ±ªÂûãÁöÑ‰ø°Âè∑„ÄÇÂÖ∑‰ΩìÊù•ËØ¥Ôºå‰Ω†‰∏çËÉΩÁî®ÂÆÉ‰ª¨Êù•ÁõëÊéß<code>SIGILL</code>„ÄÅ<code>SIGBUS</code>Âíå<code>SIGSEGV</code>‰ø°Âè∑„ÄÇ</p>
<p>Âõ†‰∏∫‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÊòØÂú®Ë∞ÉÂ∫¶ÈòüÂàó‰∏äÂºÇÊ≠•ÊâßË°åÁöÑÔºåÊâÄ‰ª•ÂÆÉ‰ª¨‰∏çÂèó‰∏Ä‰∫õ‰∏éÂêåÊ≠•‰ø°Âè∑handlerÁöÑÈôêÂà∂„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•‰ªé‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÁöÑ‰∫ã‰ª∂handler‰∏≠Ë∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇËøôÁßçÁÅµÊ¥ªÊÄßÂ¢ûÂä†ÁöÑ‰ª£‰ª∑ÊòØÔºåÂú®‰ø°Âè∑Âà∞ËææÂíåË∞ÉÂ∫¶Ê∫êÁöÑ‰∫ã‰ª∂handlerË¢´Ë∞ÉÁî®‰πãÈó¥ÂèØËÉΩ‰ºöÊúâ‰∏Ä‰∫õÂª∂Ëøü„ÄÇ</p>
<p>Ê∏ÖÂçï4-5ÊòæÁ§∫‰∫ÜÂ¶Ç‰ΩïÈÖçÁΩÆ‰∏Ä‰∏™‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÊù•Â§ÑÁêÜ<code>SIGHUP</code>‰ø°Âè∑„ÄÇË∞ÉÂ∫¶Ê∫êÁöÑ‰∫ã‰ª∂handlerË∞ÉÁî®‰∫Ü<code>MyProcessSIGHUP</code>ÂáΩÊï∞Ôºå‰Ω†ÂèØ‰ª•Âú®Ê≠§ÂÆûÁé∞Ëá™Â∑±ÁöÑÂ§ÑÁêÜ‰ø°Âè∑ÈÄªËæë„ÄÇ</p>
<p><strong>Ê∏ÖÂçï4-5</strong> ÈÖçÁΩÆblockÁõëÊéß‰ø°Âè∑</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> InstallSignalHandler()</span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">// Make sure the signal does not terminate the application.</span></span><br><span class="line">   signal(SIGHUP, SIG_IGN);</span><br><span class="line"> </span><br><span class="line">   <span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">   dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_SIGNAL, SIGHUP, <span class="number">0</span>, queue);</span><br><span class="line"> </span><br><span class="line">   <span class="keyword">if</span> (source)</span><br><span class="line">   &#123;</span><br><span class="line">      dispatch_source_set_event_handler(source, ^&#123;</span><br><span class="line">         MyProcessSIGHUP();</span><br><span class="line">      &#125;);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// Start processing signals</span></span><br><span class="line">      dispatch_resume(source);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Â¶ÇÊûú‰Ω†Ê≠£Âú®‰∏∫‰∏Ä‰∏™Ëá™ÂÆö‰πâÁöÑÊ°ÜÊû∂ÂºÄÂèë‰ª£Á†ÅÔºå‰ΩøÁî®‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫êÁöÑ‰∏Ä‰∏™Â•ΩÂ§ÑÊòØ‰ª£Á†ÅÂèØ‰ª•Áã¨Á´ã‰∫é‰ªª‰ΩïÈìæÊé•Âà∞ÂÆÉÁöÑÁ®ãÂ∫èÊù•ÁõëÊéß‰ø°Âè∑„ÄÇ‰ø°Âè∑Ë∞ÉÂ∫¶Ê∫ê‰∏ç‰ºöÂπ≤Êâ∞ÂÖ∂‰ªñË∞ÉÂ∫¶Ê∫êÊàñÁ®ãÂ∫èÂèØËÉΩÈÖçÁΩÆÁöÑ‰ªª‰ΩïÂêåÊ≠•‰ø°Âè∑handler„ÄÇ</p>
<h3 id="ÁõëÊéßËøõÁ®ã">ÁõëÊéßËøõÁ®ã</h3>
<p>ËøõÁ®ãË∞ÉÂ∫¶Ê∫êÂèØ‰ª•ËÆ©‰Ω†ÁõëÊéß‰∏Ä‰∏™ÁâπÂÆöËøõÁ®ãÁöÑË°å‰∏∫ÔºåÂπ∂‰ΩúÂá∫ÈÄÇÂΩìÁöÑÂìçÂ∫î„ÄÇ‰∏Ä‰∏™Áà∂ËøõÁ®ãÂèØ‰ª•‰ΩøÁî®ËøôÁßçË∞ÉÂ∫¶Ê∫êÊù•ÁõëËßÜÂÆÉÊâÄÂàõÂª∫ÁöÑ‰ªª‰ΩïÂ≠êËøõÁ®ã„ÄÇ‰æãÂ¶ÇÔºåÁà∂ËøõÁ®ãÂèØ‰ª•Áî®ÂÆÉÊù•ÁõëËßÜ‰∏Ä‰∏™Â≠êËøõÁ®ãÁöÑÁªìÊùü„ÄÇÂêåÊ†∑Âú∞Ôºå‰∏Ä‰∏™Â≠êËøõÁ®ãÂèØ‰ª•Áî®ÂÆÉÊù•ÁõëËßÜÂÆÉÁöÑÁà∂ËøõÁ®ãÔºåÂπ∂Âú®Áà∂ËøõÁ®ãÈÄÄÂá∫Êó∂ÈÄÄÂá∫„ÄÇ</p>
<p>Ê∏ÖÂçï4-6ÊòæÁ§∫‰∫ÜÈÖçÁΩÆ‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫ê‰ª•ÁõëËßÜÁà∂ËøõÁ®ãÁªàÊ≠¢ÁöÑÊ≠•È™§„ÄÇÂΩìÁà∂ËøõÁ®ãÁªàÊ≠¢Êó∂ÔºåË∞ÉÂ∫¶Ê∫êËÆæÁΩÆ‰∏Ä‰∫õÂÜÖÈÉ®Áä∂ÊÄÅ‰ø°ÊÅØÔºåËÆ©Â≠êËøõÁ®ãÁü•ÈÅìÂÆÉÂ∫îËØ•ÈÄÄÂá∫„ÄÇ(Á®ãÂ∫èÈúÄË¶ÅÂÆûÁé∞<code>MySetAppExitFlag</code>ÂáΩÊï∞Êù•‰∏∫ÁªàÊ≠¢ËÆæÁΩÆ‰∏Ä‰∏™ÈÄÇÂΩìÁöÑÊ†áÂøó„ÄÇ) Áî±‰∫éË∞ÉÂ∫¶Ê∫êËá™‰∏ªËøêË°åÔºåÂõ†Ê≠§ÊåÅÊúâËá™Â∑±ÔºåÂÆÉ‰πü‰ºöÂú®È¢ÑÊúüÁ®ãÂ∫èÂÖ≥Èó≠ÁöÑÊÉÖÂÜµ‰∏ãÂèñÊ∂àÂíåÈáäÊîæËá™Â∑±„ÄÇ</p>
<p><strong>Ê∏ÖÂçï4-6</strong> ÁõëÊéßÁà∂ËøõÁ®ãÁöÑÁªàÊ≠¢</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MonitorParentProcess()</span><br><span class="line">&#123;</span><br><span class="line">   pid_t parentPID = getppid();</span><br><span class="line"> </span><br><span class="line">   <span class="built_in">dispatch_queue_t</span> queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>);</span><br><span class="line">   dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC,</span><br><span class="line">                                                      parentPID, DISPATCH_PROC_EXIT, queue);</span><br><span class="line">   <span class="keyword">if</span> (source)</span><br><span class="line">   &#123;</span><br><span class="line">      dispatch_source_set_event_handler(source, ^&#123;</span><br><span class="line">         MySetAppExitFlag();</span><br><span class="line">         dispatch_source_cancel(source);</span><br><span class="line">         dispatch_release(source);</span><br><span class="line">      &#125;);</span><br><span class="line">      dispatch_resume(source);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ÂèñÊ∂àË∞ÉÂ∫¶Ê∫ê">ÂèñÊ∂àË∞ÉÂ∫¶Ê∫ê</h2>
<p>Ë∞ÉÂ∫¶Ê∫ê‰∏ÄÁõ¥Â§Ñ‰∫éÊ¥ªÂä®Áä∂ÊÄÅÔºåÁõ¥Âà∞‰Ω†‰ΩøÁî®<code>dispatch_source_cancel</code>ÂáΩÊï∞ÊòæÂºèÂèñÊ∂àÂÆÉ‰ª¨„ÄÇÂèñÊ∂à‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫ê‰ºöÂÅúÊ≠¢Êñ∞‰∫ã‰ª∂ÁöÑ‰º†ÈÄíÔºåÂπ∂‰∏î‰∏çËÉΩË¢´Êí§ÈîÄ„ÄÇÂõ†Ê≠§ÔºåÈÄöÂ∏∏ÂèñÊ∂à‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÔºåÁÑ∂ÂêéÂ∞±Á´ãÂç≥ÈáäÊîæÂÆÉÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> RemoveDispatchSource(dispatch_source_t mySource)</span><br><span class="line">&#123;</span><br><span class="line">   dispatch_source_cancel(mySource);</span><br><span class="line">   dispatch_release(mySource);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÂèñÊ∂à‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Êìç‰Ωú„ÄÇÂ∞ΩÁÆ°Âú®‰Ω†Ë∞ÉÁî®<code>dispatch_source_cancel</code>ÂáΩÊï∞ÂêéÔºåÊ≤°ÊúâÊñ∞ÁöÑ‰∫ã‰ª∂Ë¢´Â§ÑÁêÜÔºå‰ΩÜÂ∑≤ÁªèË¢´Ë∞ÉÂ∫¶Ê∫êÂ§ÑÁêÜÁöÑ‰∫ã‰ª∂ËøòÊòØÁªßÁª≠Ë¢´Â§ÑÁêÜ„ÄÇÂú®Â§ÑÁêÜÂÆå‰ªª‰ΩïÊúÄÁªà‰∫ã‰ª∂ÂêéÔºåÂ¶ÇÊûúÊúâÂèñÊ∂àhandlerÔºåË∞ÉÂ∫¶Ê∫ê‰ºöÊâßË°åÂÖ∂ÂèñÊ∂àhandler„ÄÇ</p>
<p>ÂèñÊ∂àhandlerÊòØ‰Ω†ÈáäÊîæÂÜÖÂ≠òÊàñÊ∏ÖÁêÜ‰ª£Ë°®Ë∞ÉÂ∫¶Ê∫êËé∑ÂèñÁöÑ‰ªª‰ΩïËµÑÊ∫êÁöÑÊú∫‰ºö„ÄÇÂ¶ÇÊûúË∞ÉÂ∫¶Ê∫ê‰ΩøÁî®ÊèèËø∞Á¨¶ÊàñmachÁ´ØÂè£Ôºå‰Ω†ÂøÖÈ°ªÊèê‰æõ‰∏Ä‰∏™ÂèñÊ∂àhandlerÔºå‰ª•‰æøÂú®ÂèñÊ∂àÂèëÁîüÊó∂ÂÖ≥Èó≠ÊèèËø∞Á¨¶ÊàñÈîÄÊØÅÁ´ØÂè£„ÄÇÂÖ∂‰ªñÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫ê‰∏çÈúÄË¶ÅÂèñÊ∂àhandlerÔºå‰ΩÜÂ¶ÇÊûú‰Ω†Â∞Ü‰ªª‰ΩïÂÜÖÂ≠òÊàñÊï∞ÊçÆ‰∏éË∞ÉÂ∫¶Ê∫êÂÖ≥ËÅîÔºå‰ªçÂ∫îÊèê‰æõ„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†Âú®Ë∞ÉÂ∫¶Ê∫êÁöÑ‰∏ä‰∏ãÊñáÊåáÈíà‰∏≠Â≠òÂÇ®Êï∞ÊçÆÔºå‰Ω†Â∫îÊèê‰æõÂèñÊ∂àhandler„ÄÇÂÖ≥‰∫éÂèñÊ∂àhandlerÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåÂèØÂèÇÈòÖ<a target="_blank" rel="noopener" href="https://developer.apple.com/library/archive/documentation/General/Conceptual/ConcurrencyProgrammingGuide/GCDWorkQueues/GCDWorkQueues.html#//apple_ref/doc/uid/TP40008091-CH103-SW14">Installing a Cancellation Handler</a>„ÄÇ</p>
<h2 id="ÊöÇÂÅúÂíåÊÅ¢Â§çË∞ÉÂ∫¶Ê∫ê">ÊöÇÂÅúÂíåÊÅ¢Â§çË∞ÉÂ∫¶Ê∫ê</h2>
<p>‰Ω†ÂèØ‰ª•‰ΩøÁî®<code>dispatch_suspend</code>Âíå<code>dispatch_resume</code>ÊñπÊ≥ïÊöÇÂÅúÂíåÊÅ¢Â§çË∞ÉÂ∫¶Ê∫ê‰∫ã‰ª∂ÁöÑ‰º†ÈÄí„ÄÇËøô‰∫õÊñπÊ≥ï‰∏∫Ë∞ÉÂ∫¶ÂØπË±°Â¢ûÂä†ÂíåÂáèÂ∞ëÊöÇÂÅúËÆ°Êï∞„ÄÇÂõ†Ê≠§Ôºå‰Ω†ÂøÖÈ°ªÂú®ÊØèÊ¨°Âπ≥Ë°°Ë∞ÉÁî®<code>dispatch_suspend</code>‰∏éË∞ÉÁî®<code>dispatch_resume</code>„ÄÇ</p>
<p>ÂΩìÊöÇÂÅú‰∏Ä‰∏™Ë∞ÉÂ∫¶Ê∫êÊó∂Ôºå‰ªª‰ΩïÂú®ËØ•Ë∞ÉÂ∫¶Ê∫êË¢´ÊöÇÂÅúÊó∂ÂèëÁîüÁöÑ‰∫ã‰ª∂ÈÉΩ‰ºöË¢´Êî∂ÈõÜËµ∑Êù•ÔºåÁõ¥Âà∞ÈòüÂàóÊÅ¢Â§ç„ÄÇÂΩìÈòüÂàóÊÅ¢Â§çÊó∂Ôºå‰∏çÊòØÂèëÈÄÅÊâÄÊúâÁöÑ‰∫ã‰ª∂ÔºåËÄåÊòØÂú®ÂèëÈÄÅÂâçÂ∞ÜËøô‰∫õ‰∫ã‰ª∂ÂêàÂπ∂Êàê‰∏Ä‰∏™Âçï‰∏ÄÁöÑ‰∫ã‰ª∂„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†Ê≠£Âú®ÁõëÊéß‰∏Ä‰∏™Êñá‰ª∂ÁöÑÂêçÁß∞ÂèòÂåñÔºåÂèëÈÄÅÁöÑ‰∫ã‰ª∂Â∞ÜÂè™ÂåÖÊã¨ÊúÄÂêéÁöÑÂêçÁß∞ÂèòÂåñ„ÄÇ‰ª•ËøôÁßçÊñπÂºèÂêàÂπ∂‰∫ã‰ª∂ÔºåÂèØ‰ª•Èò≤Ê≠¢ÂÆÉ‰ª¨Âú®ÈòüÂàó‰∏≠Â†ÜÁßØÔºåÂπ∂Âú®Â∑•‰ΩúÊÅ¢Â§çÊó∂ËÆ©‰Ω†ÁöÑÁ®ãÂ∫èÂ∫î‰ªò‰∏çÊù•„ÄÇ</p>
<h2 id="ÊÄªÁªì">ÊÄªÁªì</h2>
<ul>
<li>Ë∞ÉÂ∫¶Ê∫êÁî®‰∫éÁõëÂê¨Â∫ïÂ±ÇÔºàÁ≥ªÁªü„ÄÅÂÜÖÊ†∏Ôºâ‰∫ã‰ª∂ÔºåÂÆûÁé∞Â§ÑÁêÜ‰∫ã‰ª∂ÂºÇÊ≠•ÂõûË∞É„ÄÇÊó¢ÁÑ∂ÊòØÁî®‰∫éÁõëÂê¨ÔºåÂØπÂ∫îÁöÑÂ∞±ËØ•‰∏ªÂä®ÂèñÊ∂à„ÄÇ</li>
<li>Âú®Swift‰∏≠ÔºåÊ†πÊçÆË∞ÉÂ∫¶Ê∫êÁ±ªÂûãÔºåÊúâÂØπÂ∫îÁöÑÂçèËÆÆ„ÄÇ‰ΩÜÂàõÂª∫ÈÉΩÊòØ‰ΩøÁî®DispatchSourceÂØπÂ∫îÁöÑmakeÁ±ªÂ∑•ÂéÇÊñπÊ≥ïÂàõÂª∫ÁâπÂÆöÁ±ªÂûãÁöÑË∞ÉÂ∫¶Ê∫ê„ÄÇËøôÊ†∑Êé•Êî∂ÁöÑË∞ÉÂ∫¶Ê∫êËøîÂõûÂÄºÂ∞±ÂèØ‰ª•Ë∞ÉÁî®ÁâπÂÆöÁ±ªÂûãÂçèËÆÆÁöÑÂÖ∑‰ΩìÊñπÊ≥ï„ÄÇ</li>
<li>Ë∞ÉÂ∫¶Ê∫êÁöÑÈÄöÁî®ÊñπÊ≥ïÈÉΩÂÆö‰πâÂú®DispatchSourceProtocol„ÄÇ
<ul>
<li>ÈÖçÁΩÆÔºö<code>setRegistrationHandler</code>„ÄÅ<code>setEventHandler</code>„ÄÅ<code>setCancelHandler</code></li>
<li>Âü∫Êú¨Êìç‰ΩúÔºö<code>activate</code>„ÄÅ<code>cancel</code>„ÄÅ<code>suspend</code>„ÄÅ<code>resume</code>„ÄÅ</li>
</ul></li>
</ul>

    </div>

    
    
    
        

  <div class="followme">
    <p>Ê¨¢ËøéÂÖ≥Ê≥®ÊàëÁöÑÂÖ∂ÂÆÉÂèëÂ∏ÉÊ∏†ÈÅì</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Apple/" rel="tag"># Apple</a>
              <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag"># Â§öÁ∫øÁ®ã</a>
              <a href="/tags/Concurrency-Programming-Guide/" rel="tag"># Concurrency Programming Guide</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/posts/concurrency_pg_dispatch_queues/" rel="prev" title="Concurrency Programming GuideÔºöË∞ÉÂ∫¶ÈòüÂàó">
      <i class="fa fa-chevron-left"></i> Concurrency Programming GuideÔºöË∞ÉÂ∫¶ÈòüÂàó
    </a></div>
      <div class="post-nav-item">
    <a href="/posts/concurrency_pg_migrating_away_from_threads/" rel="next" title="Concurrency Programming GuideÔºöËøÅÁßªÁ∫øÁ®ã‰ª£Á†Å">
      Concurrency Programming GuideÔºöËøÅÁßªÁ∫øÁ®ã‰ª£Á†Å <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          ÊñáÁ´†ÁõÆÂΩï
        </li>
        <li class="sidebar-nav-overview">
          Á´ôÁÇπÊ¶ÇËßà
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E8%B0%83%E5%BA%A6%E6%BA%90"><span class="nav-text">ÂÖ≥‰∫éË∞ÉÂ∫¶Ê∫ê</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%B0%83%E5%BA%A6%E6%BA%90"><span class="nav-text">ÂàõÂª∫Ë∞ÉÂ∫¶Ê∫ê</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E5%92%8C%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AA%E4%BA%8B%E4%BB%B6handler"><span class="nav-text">ÁºñÂÜôÂíåÈÖçÁΩÆ‰∏Ä‰∏™‰∫ã‰ª∂Handler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%8F%96%E6%B6%88handler"><span class="nav-text">ÈÖçÁΩÆÂèñÊ∂àHandler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E7%9B%AE%E6%A0%87%E9%98%9F%E5%88%97"><span class="nav-text">‰øÆÊîπÁõÆÊ†áÈòüÂàó</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E8%81%94%E8%87%AA%E5%AE%9A%E4%B9%89%E6%95%B0%E6%8D%AE%E4%B8%8E%E8%B0%83%E5%BA%A6%E6%BA%90"><span class="nav-text">ÂÖ≥ËÅîËá™ÂÆö‰πâÊï∞ÊçÆ‰∏éË∞ÉÂ∫¶Ê∫ê</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E6%BA%90%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="nav-text">Ë∞ÉÂ∫¶Ê∫êÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B0%83%E5%BA%A6%E6%BA%90%E7%A4%BA%E4%BE%8B"><span class="nav-text">Ë∞ÉÂ∫¶Ê∫êÁ§∫‰æã</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="nav-text">ÂàõÂª∫ÂÆöÊó∂Âô®</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8E%E6%8F%8F%E8%BF%B0%E7%AC%A6%E4%B8%AD%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="nav-text">‰ªéÊèèËø∞Á¨¶‰∏≠ËØªÂèñÊï∞ÊçÆ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%8A%E6%95%B0%E6%8D%AE%E5%86%99%E5%85%A5%E6%8F%8F%E8%BF%B0%E7%AC%A6%E4%B8%AD"><span class="nav-text">ÊääÊï∞ÊçÆÂÜôÂÖ•ÊèèËø∞Á¨¶‰∏≠</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%91%E6%8E%A7%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E5%AF%B9%E8%B1%A1"><span class="nav-text">ÁõëÊéßÊñá‰ª∂Á≥ªÁªüÂØπË±°</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%91%E6%8E%A7%E4%BF%A1%E5%8F%B7"><span class="nav-text">ÁõëÊéß‰ø°Âè∑</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%91%E6%8E%A7%E8%BF%9B%E7%A8%8B"><span class="nav-text">ÁõëÊéßËøõÁ®ã</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%96%E6%B6%88%E8%B0%83%E5%BA%A6%E6%BA%90"><span class="nav-text">ÂèñÊ∂àË∞ÉÂ∫¶Ê∫ê</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9A%82%E5%81%9C%E5%92%8C%E6%81%A2%E5%A4%8D%E8%B0%83%E5%BA%A6%E6%BA%90"><span class="nav-text">ÊöÇÂÅúÂíåÊÅ¢Â§çË∞ÉÂ∫¶Ê∫ê</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">ÊÄªÁªì</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Ê¨äÂíö"
      src="/images/icon.png">
  <p class="site-author-name" itemprop="name">Ê¨äÂíö</p>
  <div class="site-description" itemprop="description">ü§òü§Øüëæ</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">84</span>
          <span class="site-state-item-name">ÊñáÁ´†</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">ÂàÜÁ±ª</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">Ê†áÁ≠æ</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/bqlin" title="GitHub ‚Üí https:&#x2F;&#x2F;github.com&#x2F;bqlin" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/hearingdog" title="Weibo ‚Üí https:&#x2F;&#x2F;weibo.com&#x2F;hearingdog" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://xiaozhuanlan.com/metal-reference-translation" title="https:&#x2F;&#x2F;xiaozhuanlan.com&#x2F;metal-reference-translation" rel="noopener" target="_blank">MetalÂÜÖÂèÇ</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://xiaozhuanlan.com/wwdc21" title="https:&#x2F;&#x2F;xiaozhuanlan.com&#x2F;wwdc21" rel="noopener" target="_blank">WWDC21 ÂÜÖÂèÇ</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2016 ‚Äì 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Ê¨äÂíö</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Á´ôÁÇπÊÄªÂ≠óÊï∞">279k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Á´ôÁÇπÈòÖËØªÊó∂Èïø">4:14</span>
</div>
  <div class="powered-by">Áî± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> Âº∫ÂäõÈ©±Âä®
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="ÊÄªËÆøÂÆ¢Èáè">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="ÊÄªËÆøÈóÆÈáè">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>




  
<script src="/js/local-search.js"></script>











<script>
if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'default',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}
</script>


  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '7ed324dbfd2741c35c0e',
      clientSecret: '75a59e1f6a55202c4a1b0ec3570ad5b5dccbc390',
      repo        : 'bqlin.github.io',
      owner       : 'bqlin',
      admin       : ['bqlin'],
      id          : 'cfc19e356f13ae4ac01f787526ce4894',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","vOffset":-100},"mobile":{"show":false,"scale":0.5},"log":false});</script></body>
</html>
